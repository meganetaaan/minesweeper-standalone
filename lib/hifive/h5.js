/* Copyright (C) 2012-2016 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.2.2 gitCommitId 18daf02760ed112fc2d57b1256e0ebe47c7dfd2e (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var ha,Ea,qa,xa;function k(a,c,h){var j=null,w=ya[a],o=xb[a];o&&(j=o(a,w,c,h));!j&&w&&(j=f.u.str.format.apply(null,[w].concat(c)));j&&(j+="(code="+a+")");c=j?Error(j):Error("FwError: code = "+a);a&&(c.code=a);h&&(c.detail=h);throw c;}function yb(a){for(var c in a)a.hasOwnProperty(c)&&(ya[c]=a[c])}function da(a,c,h){var j=null,w=ya[a];w&&(c=[w].concat(c),j=f.u.str.format.apply(null,c));return{code:a,message:j,detail:h}}function I(a){return null==a?a:E(a)?a:[a]}function u(a){return"string"===
typeof a}function va(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function Ma(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function wa(a){return!u(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function Fa(e){if("regexp"===a.type(e))return e;var c="",c=-1!==e.indexOf("*")?a.map(e.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):e;return RegExp("^"+c+"$")}function ra(a,c,h){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(c,h):a[c](h))}function fa(e,c,h,j){return e[a.hasOwnProperty("curCSS")?
"pipe":"then"](c,h,j)}function tb(a){return a&&a.document&&a.document.nodeType===kb&&U(a.document)===a}function M(a){return typeof a.nodeType===ja?tb(a)?a.document:null:a.nodeType===kb?a:a.ownerDocument}function U(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ga(e,c,h,j){function w(b){return function(){if(!k._rejected){var d=f.u.obj.argsToArray(arguments),i=a.inArray(b,e);C[i]=2>d.length?d[0]:d;++k._resolveCount===k._promisesLength&&k._doneCallbackExecuter()}}}var o=
e?e.length:0,p=f.async.isPromise,k=this,C=null;this._doneCallbackExecuter=function(){k._resolved=!0;c&&(C?c.call(this,C):c.apply(this,arguments))};this._failCallbackExecuter=function(){k._rejected=!0;h?h.apply(this,arguments):j&&f.settings.commonFailHandler&&f.settings.commonFailHandler.call(this,arguments)};if(1===o||p(e)){var A=1===o?e[0]:e;p(A)?(this.remove=function(a){!this._resolved&&!this._rejected&&A===a&&this._doneCallbackExecuter()},A.done(this._doneCallbackExecuter),A.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var o=[],d=0,l=e.length;d<l;d++){var b=e[d];p(b)&&o.push(b)}p=o.length;if(0===p)this._resolved=!0,c&&c();else{this._promises=o;C=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=p;for(d=0;d<p;d++)l=o[d],l.done(w(l)).fail(this._failCallbackExecuter)}}}function ea(a,c,h,j){return new Ga(a,c,h,j)}var ub=void 0;if(window.h5){if(window.h5.env&&"1.2.2"===window.h5.env.version)return;ub=window.h5}var f={};window.h5=f;f.coexist=function(){window.h5=ub;
return f};f.env={version:"1.2.2"};var ya={},xb={},vb=12029,ja="undefined",$=1,kb=9,P=function(){var a=null,c=null,h=null;return function(j){a||(a=document.createElement("a"));null===h&&(a.setAttribute("href","./"),h="./"!==a.href);if(h)return a.setAttribute("href",j),a.href;c||(c=document.createElement("span"));c.innerHTML='<a href="'+j+'" />';return c.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(e,c,h){if(!e||!u(e))return null;"boolean"===typeof c&&(h=c,c=!1);c=c||document;e=a("<div>"+
e+"</div>",c);h||e.find("script").remove();for(var h=e[0].childNodes,c=c.createDocumentFragment(),e=0,j=h.length;e<j;e++)c.appendChild(h[e]);return c.childNodes};var E=Array.isArray||function(){var a=Object.prototype.toString;return function(c){return"[object Array]"===a.call(c)}}(),F=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(c){return"[object Function]"===a.call(c)}}return function(a){return"function"===typeof a}}();Ga.prototype=a.extend(Ga.prototype,
{remove:function(e){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var c=a.inArray(e,this._promises);-1!==c&&(this._promises.splice(c,1),this._resolveArgs.splice(c,1),Ma(e)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});ha={controllerInternal:null};xa=qa=Ea=void 0;(function(){function e(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";
case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case d:return"u";case "undefElem":return"_";case "objElem":return"@"}}function c(a,b){if(u(a)){var d=a;b&&(d=d.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,
"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(c(a.toString())):a}function h(a,b){return"1"===b?a:u(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(h(a.toString())):a}function j(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function w(a,b,d){var g=f.async.deferred();f.ajax({url:a,async:b,cache:d,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
C(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,C(arguments))});return g.promise()}function o(a){u(a)||k(l,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,g=0;g<b;g++)wa(a[g])||k(l,"h5.u.obj.ns()");for(var i=window,g=0;g<b;g++){var e=a[g];typeof i[e]===d&&(i[e]={});i=i[e]}return i}function p(a,d){var g=o(a),i;for(i in d)d.hasOwnProperty(i)&&(void 0!==g[i]&&k(b,[a,i]),g[i]=d[i])}function x(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function C(a){return Array.prototype.slice.call(a)}
function A(a,b){u(a)||k(l,"h5.u.obj.getByPath()");var a=a.replace(/\[(\d+)\]/g,function(a,b,d){return d?"."+b:b}),d=a.split("."),g=0;if("window"===d[0]&&(!b||b===window))g=1;for(var i=b||window,e=d.length;g<e&&!(i=i[d[g]],null==i);g++);return i}var d="undefined",l=11E3,b=11001,n=11004,m=11005,i=11006,g={},v={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},B=void 0!==document.createElement("script").onload,S=-1===/\r\n/.toString().indexOf("\r\n");p("h5.u",{loadScript:function(b,d){var i=
f.async.deferred,e=I(b);(!e||0===e.length)&&k(11007);for(var c=0,n=e.length;c<n;c++)b=e[c],(!u(b)||!a.trim(b))&&k(11007);null!=d&&!a.isPlainObject(d)&&k(11008,"h5.u.loadScript()");var j=d&&!1===d.async?!1:!0,h=!!(d&&!0===d.force),c=!!(d&&!0===d.parallel),m=!!(d&&!0===d.atomic),l=!h,v=j?i():null,o=j?function(a){v.reject(da(11010,[a]))}:null,n=j?function(){var a=i();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,p=c?[]:null,S=[],x={};if(j){if(!m&&B){var A=a("head"),D=function(a){var b=
i(),d=document.createElement("script");d.onload=function(){d.onload=null;g[a]=a;b.resolve()};d.onerror=function(){d.onerror=null;b.reject(a)};d.type="text/javascript";d.src=l?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;A[0].appendChild(d);return b.promise()};if(c)p.push(n()),a.each(e,function(){var a=P(this.toString());if(!h&&a in g)return!0;p.push(D(a))}),ea(p,function(){v.resolve()},o);else{var J=fa(i().resolve(),n);a.each(e,function(){var a=P(this.toString());J=fa(J,function(){if(h||!(a in g))return D(a)},
o)});fa(J,function(){v.resolve()},o)}}else if(c){var R=[];p.push(n());R.push(null);a.each(e,function(){var a=P(this.toString());if(!h&&(a in g||a in x))return!0;p.push(w(a,j,l));m?x[a]=a:R.push(null)});c=e=null;m?(e=function(){a.each(C(arguments),function(b,d){a.globalEval(d[0])});a.extend(g,x);v.resolve()},c=a.noop):(e=function(){v.resolve()},c=function(){for(var b=C(arguments),d=0;d<R.length;d++)if(b[d]){var g=b[d][3];R[d]!==g&&(a.globalEval(b[d][0]),R.splice(d,1,g))}});f.async.when(p).done(e).fail(o).progress(c)}else J=
fa(i().resolve(),n),a.each(e,function(){var b=P(this.toString());J=fa(J,function(){var d=i();!h&&(b in g||b in x)?d.resolve():w(b,j,l).done(function(i){m?(S.push(i),x[b]=b):(a.globalEval(i),g[b]=b);d.resolve()}).fail(function(){d.reject(this.url)});return d.promise()},o)}),fa(J,function(){m&&(a.each(S,function(b,d){a.globalEval(d)}),a.extend(g,x));v.resolve()},o);return v.promise()}a.each(e,function(){var b=P(this.toString());if(!h&&(b in g||b in x))return!0;w(b,j,l).done(function(d){m?(S.push(d),
x[b]=b):(a.globalEval(d),g[b]=b)}).fail(function(){k(11010,[b])})});m&&(a.each(S,function(b,d){a.globalEval(d)}),a.extend(g,x))},createInterceptor:function(a,b){return function(d){var g={},i=a?a.call(this,d,g):d.proceed();d.result=i;if(!b)return i;if(i&&F(i.promise)&&!x(i)){var e=this;ra(i,"always",function(){b.call(e,d,g)});return i}b.call(this,d,g);return i}}});p("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===
d},format:function(a,b){if(null==a)return"";var g=C(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,b){if(/^\d+$/.test(b)){var i=g[parseInt(b,10)];return typeof i===d?d:i}i=/^\d+[\.|\[]/.test(b)?b:"0."+b;i=A(i,g);return typeof i===d?d:i})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return v[a]})}});p("h5.u.obj",{expose:p,ns:o,serialize:function(b){function g(a){for(var b=0,d=h.length;b<d;b++)if(a===h[b])return!0;return!1}function i(a){for(var b=
0,d=h.length;b<d;b++)a===h[b]&&h.splice(b,1)}function n(b){var l=b,f=a.type(b);"object"===typeof b&&(b instanceof String?f="String":b instanceof Number?f="Number":b instanceof Boolean&&(f="Boolean"));switch(f){case "String":case "string":l=e(f)+c(l);break;case "Boolean":l=l.valueOf();case "boolean":l=e(f)+(l?1:0);break;case "Number":l=l.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))l=Infinity===b.valueOf()?e("infinity"):-Infinity===b.valueOf()?e("-infinity"):e("nan");l=e(f)+l;break;
case "number":l=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?e("infinity"):-Infinity===b?e("-infinity"):e("nan"):e(f)+l;break;case "regexp":l=e(f)+c(l.toString(),S);break;case "date":l=e(f)+ +l;break;case "array":g(b)&&k(ERR_CODE_REFERENCE_CYCLE);h.push(b);for(var v=[],l=e(f)+"[",f=0,o=b.length;f<o;f++){v[f.toString()]=!0;var p;p=b.hasOwnProperty(f)?"function"===a.type(b[f])?e(d):j(n(b[f])):e("undefElem");l+='"'+p+'"';f!==b.length-1&&(l+=",")}var f="",B;for(B in b)v[B]||"function"!==
a.type(b[B])&&(f+='"'+j(c(B))+'":"'+j(n(b[B]))+'",');f&&(l+=(b.length?",":"")+'"'+e("objElem")+"{"+j(f),l=l.replace(/,$/,""),l+='}"');l+="]";i(b);break;case "object":g(b)&&k(m);h.push(b);l=e(f)+"{";for(B in b)b.hasOwnProperty(B)&&"function"!==a.type(b[B])&&(l+='"'+j(c(B))+'":"'+j(n(b[B]))+'",');l=l.replace(/,$/,"");l+="}";i(b);break;case "null":case d:l=e(f)}return l}F(b)&&k(11002);var h=[];return"2|"+n(b)},deserialize:function(b){function g(b){function l(a){switch(a){case "s":return"string";case "n":return"number";
case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return d;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;m=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(l(b)){case "String":m=new String(h(m,c));break;case "string":break;
case "Boolean":"0"===m||"1"===m?m=new Boolean("1"===m):k(i);break;case "boolean":"0"===m||"1"===m?m="1"===m:k(i);break;case "nan":""!==m&&k(i);m=NaN;break;case "infinity":""!==m&&k(i);m=Infinity;break;case "-infinity":""!==m&&k(i);m=-Infinity;break;case "Number":"infinity"===l(m)?m=new Number(Infinity):"-infinity"===l(m)?m=new Number(-Infinity):"nan"===l(m)?m=new Number(NaN):(m=new Number(m),isNaN(m.valueOf())&&k(i));break;case "number":m=(new Number(m)).valueOf();isNaN(m)&&k(i);break;case "array":var j;
try{j=a.parseJSON(m)}catch(f){k(i)}E(j)||k(i);for(var m=[],v=0,o=j.length;v<o;v++)switch(l(j[v].substring(0,1))){case "undefElem":m[v]=void 0;delete m[v];break;case "objElem":var b=g(e("object")+j[v].substring(1)),B;for(B in b)m[h(B)]=b[B];break;default:m[v]=g(j[v])}break;case "object":try{j=a.parseJSON(m)}catch(p){k(i)}a.isPlainObject(j)||k(i);m={};for(B in j)b=g(j[B]),m[h(B)]=b;break;case "date":m=new Date(parseInt(m,10));break;case "regexp":try{v=m.match(/^\/(.*)\/(.*)$/),o=h(v[1],c),m=RegExp(o,
v[2])}catch(w){k(i)}break;case "null":""!==m&&k(i);m=null;break;case d:""!==m&&k(i);m=void 0;break;default:k(n)}return h(m,c)}u(b)||k(11009);b.match(/^(.)\|(.*)/);var c=RegExp.$1;"1"!==c&&"2"!==c&&k(11003,[c,"2"]);return g(RegExp.$2)},isJQueryObject:x,argsToArray:C,getByPath:A})})();(function(){function e(a,e){a.target||(a.target=e);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var c=!1;a.isDefaultPrevented=function(){return c};a.preventDefault=function(){c=true}}if(!a.isImmediatePropagationStopped){var h=
!1;a.isImmediatePropagationStopped=function(){return h};a.stopImmediatePropagation=function(){h=true}}}function c(a){var e={},c;for(c in a){var h=a[c];if(a.hasOwnProperty(c)&&(F(h)||null===h||"string"===typeof h||"number"===typeof h||"boolean"===typeof h))e[c]=h}this._mix=function(a){for(var c in e)a[c]=e[c]};this._hasInterface=function(a){for(var c in e)if(!f.u.str.startsWith(c,"_")&&typeof a[c]===ja)return!1;return!0}}function h(a){return new c(a)}a.extend(c.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});f.u.obj.expose("h5.mixin",{createMixin:h,eventDispatcher:h({hasEventListener:function(a,e){if(!this._eventListeners)return!1;var c=this._eventListeners[a];if(!c||!this._eventListeners.hasOwnProperty(a))return!1;for(var h=0,f=c.length;h<f;h++)if(c[h]===e)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!u(a))&&k(16E3);null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],h=0,f=e.length;h<f;h++)if(e[h]===c){e.splice(h,1);break}},dispatchEvent:function(a){if(this._eventListeners){var c=this._eventListeners[a.type];if(c){c=c.slice(0);e(a,this);for(var h=0,f=c.length;h<f&&!a.isImmediatePropagationStopped();h++)F(c[h])?c[h].call(a.target,a):c[h].handleEvent&&c[h].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var e,c,h,j,w,o,p;function x(a){return a.match(/^error$/i)?e:a.match(/^warn$/i)?c:a.match(/^info$/i)?h:a.match(/^debug$/i)?j:a.match(/^trace$/i)?w:a.match(/^all$/i)?o:a.match(/^none$/i)?p:null}function C(a,b){var d={},g=a.slice(0,b),i=Math.min(S,b),c=g.slice(0,i).join(" <- ");g.length>i&&(c+=" ...");d.preview=c;d.all=g.join("\n");return d}function A(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function d(b){for(var b=f.u.obj.argsToArray(b),
d=[],g=0,i=b.length;g<i;g++)d.push(a.type(b[g]));return d.join(", ")}function l(){}function b(b){(!u(b)||0===a.trim(b).length)&&k(i);this.category=a.trim(b)}var n=10003,m=10004,i=10005,g=10007,v=10008,B=10010,S=3;e=50;c=40;h=30;j=20;w=10;o=0;p=-1;var z=null;l.prototype={init:function(){},log:function(a){window.console&&(u(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,d=null,d=1===b.length?b[0]:f.u.str.format.apply(f.u.str,b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==e&&console.error?(console.error(b),d=!0):a==c&&console.warn?(console.warn(b),d=!0):a==h&&console.info?(console.info(b),d=!0):a==j&&console.debug&&(console.debug(b),d=!0);!d&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==e&&console.error?this._output(console.error,b):a.level==c&&console.warn?this._output(console.warn,b):a.level==h&&console.info?this._output(console.info,b):a.level==j&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(d){}a(b)}};b.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(e,arguments,this.error)},warn:function(a){this._log(c,arguments,this.warn)},info:function(a){this._log(h,arguments,this.info)},debug:function(a){this._log(j,arguments,this.debug)},trace:function(a){this._log(w,arguments,this.trace)},_traceFunctionName:function(b){var g=[],i=Error();if(i=i.stack||i.stacktrace)var c=/_traceFunctionName/,g=i.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),e=null,m=null,g=a.map(g,function(b,d){if(0===b.length)return null==m?"":null;e=""===a.trim(b)?"{anonymous}":a.trim(b);null===m&&c.test(b)&&(m=d);return e}).slice(m+3);else for(var b=b.caller,i=0,l=this.maxStackSize;i<l;i++){var h=A(b),n=d(b.arguments),f;try{f=b.caller}catch(v){g.push("{unable to trace}");break}h?g.push("{"+h+"}("+n+")"):f?g.push("{anonymous}("+n+")"):g.push("{root}("+n+")");if(!f)break;b=f}return C(g,this.maxStackSize)},
_log:function(a,b,d){var b={level:a,args:f.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},g=z.out,i=z.defaultOut,d=[],c=!1;if(g)for(var g=I(g),e=0,m=g.length;e<m;e++){var l=g[e];if(l.compiledCategory.test(this.category)&&a>=l.compiledLevel&&0<=l.compiledLevel&&(d.push(l),!1!==l.terminate)){c=!0;break}}(!d.length||!c)&&d.push(i);e=0;for(g=d.length;e<g;e++){i=d[e];m=i.compiledLevel;i=i.compiledTargets;if(a<m||0>m)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!i||0===i.length)break;c=0;for(m=i.length;c<m;c++)i[c].log(b)}},_levelToString:function(a){if(a===e)return"ERROR";if(a===c)return"WARN";if(a===h)return"INFO";if(a===j)return"DEBUG";if(a===w)return"TRACE"}};f.u.obj.expose("h5.log",{createLogger:function(a){return new b(a)},configure:function(){function b(i,l,h){if(!h){var f=l.category;(!u(f)||0===a.trim(f).length)&&k(B);f=a.trim(f);l.compiledCategory=Fa(f);e.push(f)}h=null==l.level?x(h?d.level:c.level):u(l.level)?x(a.trim(l.level)):
l.level;"number"!==typeof h&&k(n,l.level);l.compiledLevel=h;h=[];f=l.targets;if(null!=f){var j=[];null==f||E(f)||u(f)&&a.trim(f).length||k(v);for(var f=I(f),o=0,D=f.length;o<D;o++){null==f[o]||u(f[o])&&a.trim(f[o]).length||k(v);var p=f[o];if(p){-1!==a.inArray(p,j)&&k(g,p);var w=i[p];w||k(m,p);j.push(p);h.push(w.compiledTarget)}}}l.compiledTargets=h}var d={level:"NONE",targets:null},i=a.extend(!0,{},f.settings.log),c=i.defaultOut;c||(c=d,i.defaultOut=c);var e=[],h=i.target;h||(h={},i.target=h);(function(b){a.isPlainObject(b)||
k(10009);for(var d in b){var i=b[d];a.type(i.type)!=="object"&&i.type!=="console"&&k(1E4);var g=null,g=i.type==="console"?new l:a.extend(true,{},i.type);g.init&&g.init(i);i.compiledTarget=g}b.console={type:"console",compiledTarget:new l}})(h);b(h,c,!0);var j=i.out;if(j)for(var j=I(j),o=0,p=j.length;o<p;o++)b(h,j[o]);z=i}})})();(function(){function e(c){f.settings.aspects=a.map(I(c),function(a){a.target&&(a.compiledTarget=Fa(a.target));a.pointCut&&(a.compiledPointCut=Fa(a.pointCut));return a})}f.u.obj.ns("h5.settings");
f.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===vb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var c=f.u.createInterceptor(function(a,
c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});f.u.obj.expose("h5.core.interceptor",{lapInterceptor:c,logInterceptor:c,errorInterceptor:function(a){var c=null;try{c=a.proceed()}catch(e){f.settings.commonFailHandler&&F(f.settings.commonFailHandler)&&f.settings.commonFailHandler.call(null,e)}return c}});
a(document).trigger("h5preinit");f.settings.aspects&&e(f.settings.aspects);f.log.configure()})();(function(){f.u.obj.expose("h5.env",{ua:function(e){function c(a,b){var d=u(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function h(a,b){var d=u(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function f(a,b){var d=u(a,"[^;) ]*",b).split(":");return 1===d.length?"":d[d.length-1]}var k=!!e.match(/iPhone/i),o=!!e.match(/iPad/i),p=k||o,x=!!e.match(/android/i),C=!!e.match(/Windows Phone/i),
A=!!e.match(/Edge/),d=!!e.match(/MSIE/)||!!e.match(/Trident/),l=!!e.match(/Firefox/i),b=!A&&!!e.match(/Chrome/i)||!!e.match(/CrMo/)||!!e.match(/CriOS/),n=!A&&!x&&!b&&!!e.match(/Safari/i),m=!A&&!!e.match(/Webkit/i),i=!!e.match(/Opera/i),g=x&&!!e.match(/Safari/i)&&!b,v=!(!k&&!C&&!(g&&e.match(/Mobile/)&&!e.match(/SC-01C/)||x&&b&&e.match(/Mobile/)||e.match(/Fennec/i)||e.match(/Opera Mobi/i))),B=!(!o&&!(g&&!e.match(/Mobile/)||x&&b&&!e.match(/Mobile/)||e.match(/SC-01C/)||e.match(/Fennec/i)||e.match(/Opera Tablet/i))),
S=!v&&!B,z=null,G=null,Y=function(b,d){return a.trim(e.substring(e.indexOf(b)+b.length,e.indexOf(d))).split("_")},u=function(b,d,i){return a.trim(e.match(!1===i?RegExp(b+d):RegExp(b+d,"i")))};if(k)G=Y("iPhone OS","like"),z=parseInt(G[0]),G=G.join(".");else if(o)G=Y("CPU OS","like"),z=parseInt(G[0]),G=G.join(".");else if(!x||!l)x?(G=c("Android"),z=parseInt(G.split(".")[0])):C&&((G=c("Windows Phone OS"))||(G=c("Windows Phone")),z=parseInt(G.split(".")[0]));d&&i&&(d=!1);var za=Y=null;if(p||x&&g)Y=z,
za=G;else{var L=null;d?L=c("MSIE",!1)||f("rv"):b?(L=h("Chrome",!1))||(L=h("CrMo",!1)):n?L=h("Version"):l?L=h("Firefox"):i?((L=h("Version"))||(L=h("Opera")),L||(L=c("Opera"))):A&&(L=h("Edge"));L&&(Y=parseInt(L.split(".")[0]),za=L)}return{osVersion:z,osVersionFull:G,browserVersion:Y,browserVersionFull:za,isiPhone:k,isiPad:o,isiOS:p,isAndroid:x,isWindowsPhone:C,isIE:d,isFirefox:l,isChrome:b,isSafari:n,isOpera:i,isEdge:A,isAndroidDefaultBrowser:g,isSmartPhone:v,isTablet:B,isDesktop:S,isWebkit:m}}(navigator.userAgent)})})();
(function(){function e(a){function c(){b=!0;e=this;m=p(arguments);if(va(a)||Ma(a))return a;var g=p(arguments);if(0<i.length)for(var l=0,h=i.length;l<h;l++){var f=g;f!==arguments&&(f=I(f));F(i[l])&&i[l].apply(this,f)}return a}var b=!1,e=null,m=null,i=[];a.progress=function(){for(var g=p(arguments),c=0,l=g.length;c<l;c++){var h=g[c];if(E(h))a.progress.apply(this,h);else if(F(h))if(b){var f=m;f!==m&&(f=I(f));h.apply(e,f)}else i.push(h)}return this};a.notify=c;a.notifyWith=function(a,b){return!b?c.apply(a):
c.apply(a,b)}}function c(a){if(!a)return!1;for(var a=I(a),c=0,b=a.length;c<b;c++)if(F(a[c]))return!0;return!1}function h(d,l){function b(a){l?l[a]&&(d[a]=l[a]):(v[a]=d[a],d[a]=function(){return function(){if(!i){var b=p(arguments);if("then"===a||"pipe"===a)b=b[1];c(b)&&(i=!0)}return d._h5UnwrappedCall.call(this,a,p(arguments))}}(a),B[a]=d[a])}function n(a){return function(){var b=f.settings.commonFailHandler;!i&&b&&!g&&(d.fail.call(this,b),g=!0);return a.apply(this,arguments)}}if(d._h5UnwrappedCall)return d;
var m=!!d.progress;!m&&!A(d)?e(d):l&&(d.progress=l.progress);var i=!1,g=!1,v={},B={};d._h5UnwrappedCall=l?l._h5UnwrappedCall:function(b,i){i=I(i);a.extend(d,v);var g=d[b].apply(this,i);a.extend(d,B);return g};for(var k=0,z=j.length;k<z;k++){var C=j[k];d[C]&&b(C)}d.pipe&&!l&&(d.pipe=function(){for(var a=f.async.deferred(),b=p(arguments),d=0,i=w.length;d<i;d++){var g=this;(function(b,d,i){function c(){if(e){var d=b.apply(this,arguments);if(d&&F(d.promise)){h(d);d.done(a.resolve);d._h5UnwrappedCall("fail",
a.reject);F(d.progress)&&d.progress(a.notify)}else a[i+"With"](this,[d])}else a[i+"With"](this,arguments)}var e=F(b);if(!e&&d==="fail")g._h5UnwrappedCall(d,c);else g[d](c)})(b[d],w[d],o[d])}return a.promise()},B.pipe=d.pipe);if(d.then&&!l){var u=d.then;d.then=x?d.pipe:function(){var a=arguments,b=u.apply(this,a);!m&&c(a[2])&&d.progress.call(d,a[2]);return b};B.then=d.then}d.reject&&(d.reject=l&&l.reject?l.reject:n(d.reject));d.rejectWith&&(d.rejectWith=l&&l.rejectWith?l.rejectWith:n(d.rejectWith));
if(d.promise)if(l&&l.promise)d.promise=l.promise;else{var ga=d.promise;d.promise=function(){return h(ga.apply(this,arguments),d)}}return d}var j=["fail","always","pipe","then"],w=["done","fail","progress"],o=["resolve","reject","notify"],p=f.u.obj.argsToArray,x=function(){var d=a.Deferred();return d!==d.then()}(),C=function(){var d=a.Deferred();return h(d)},A=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};f.u.obj.expose("h5.async",{deferred:C,when:function(){var d=p(arguments);1===
d.length&&E(d[0])&&(d=d[0]);var c=d.length,b=f.async.deferred(),e=b.promise(),m=a.when.apply(a,d).done(function(){b.resolveWith(this&&this.promise&&this.promise()===m?b:this,p(arguments))}).fail(function(){b.rejectWith(this,p(arguments))});if(m.progress)m.progress(function(){b.notifyWith(this===m?e:this,p(arguments))});else{for(var i=[],g=0;g<c;g++)i[g]=void 0;for(var h=function(a){return function(d){i[a]=1<arguments.length?p(arguments):d;b.notifyWith(e,i)}},g=0;g<c;g++){var j=d[g];j&&F(j.promise)&&
j.progress&&(1<c?j.progress(h(g)):j.progress(function(){b.notifyWith(e,p(arguments))}))}}return e},isPromise:A,loop:function(d,c,b){E(d)||k(5E3);var e=C(),m="number"===a.type(b)?b:20,i=0,g=d.length,h,f=null,j=function(){if(i===g)e.resolve(d);else{var a=c.call(d,i,d[i],f);i++;A(a)?a.done(function(){h()}).fail(function(){e.reject(d)}):h()}},o=function(){setTimeout(function(){var a=i-1;0<i&&e.notify({data:d,index:a,value:d[a]});j()},0)},p=!1;h=function(){p||(0===i%m?o():j())};var w=!1,f={resume:function(){!w&&
p&&(p=!1,h())},pause:function(){p=!0},stop:function(){w=!0;e.resolve(d)}};o();return e.promise()}})})();(function(){function e(a,c){for(var e=0,h=k.length;e<h;e++){var d=k[e];a[d]&&(c[o[d]](a[d]),a[d]=void 0)}}function c(c,e,h){for(var f in e)if(e.hasOwnProperty(f)&&(h||!F(e[f]))&&-1===a.inArray(f,j))c[f]=e[f]}function h(a,e){c(this,a,!0);e.promise(this);var h=this.always;this.always=function(){h.apply(this,arguments);return this}}var j=["error","success","complete"],k=["error","success","complete"],
o={success:"done",error:"fail",complete:"always"};f.u.obj.expose("h5",{ajax:function(){function j(a,e,h){c(l,h);d.resolveWith(this,arguments)}function o(b,e,h){if(0===k.retryCount||!1===k.retryFilter.apply(this,arguments))c(l,b),d.rejectWith(this,arguments);else if(k.retryCount--,this.async){var i=this;setTimeout(function(){a.ajax(i).done(j).fail(o)},k.retryInterval)}else a.ajax(this).done(j).fail(o)}var k={},w=arguments;u(w[0])?(a.extend(k,w[1]),k.url=w[0]):a.extend(k,w[0]);var k=a.extend({},f.settings.ajax,
k),d=f.async.deferred();e(k,d);var w=a.ajax(k),l=new h(w,d);w.done(j).fail(o);return l}})})();(function(){function e(a,c){this.id=a;this.content=c}function c(a,c,b){this.url=a;this.path=c;this.content=b}function h(a){this._resourceKey=a}function j(a){function c(a,b){if(0!==b.indexOf("../"))return a+b;b=b.slice(3);a=a.replace(/[^\/]+?\/$/,"");return c(a,b)}var b=f.settings.res.baseUrl;if(a===P(a)||0===a.indexOf("/"))return a;if(!b)return 0===a.indexOf("./")?a:"./"+a;f.u.str.endsWith(b,"/")||(b+="/");
return c(b,a)}function k(a,c,b){void 0===b&&F(a)&&(b=a,a=void 0);p.unshift({type:a,test:c,resolver:b})}var o=f.async.deferred,p=[],x={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var C={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var b=P(a);c||delete this.cache[b];for(var e=0,h=this.cacheUrls.length;e<
h;e++)if(this.cacheUrls[e]===b){this.cacheUrls.splice(e,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var e=P(a);if(this.accessingUrls[e])return this.accessingUrls[e];var b=o(),h=b.promise();this.accessingUrls[e]=h;var m=this;f.ajax(a,{dataType:"text"}).done(function(i,g,h){delete m.accessingUrls[e];i=new c(e,a,h.responseText);m.append(i);
b.resolve(i)}).fail(function(c){delete m.accessingUrls[e];b.reject(da(17E3,[c.status,e],{url:e,path:a,error:c}))});return h}},A={load:function(a){var c=P(a);return C.cache[c]?o().resolve(C.getResourceFromCache(c)).promise():C.loadResourceFromPath(a)},clearCache:function(a){C.clearCache(a)},clearAllCache:function(){C.clearAllCache()}};a.extend(h.prototype,{resolve:function(d){function c(b){for(var i=0,e=p.length;i<e;i++)if(!(d&&d!==p[i].type)){var g=p[i].test;if(!d&&g)if("regexp"===a.type(g)){if(!g.test(b))continue}else if(!1===
g(b))continue;return p[i].resolver(b,d)}return!1}if(!E(this._resourceKey))return c(this._resourceKey);for(var b=this._resourceKey,e=[],h=0,i=b.length;h<i;h++){var g=c(b[h]);e.push(g)}var j=f.async.deferred();ea(e,function(a){E(a)||(a=[a]);a.unshift(a.slice(0));j.resolveWith(j,a)},function(a){j.reject(a)});return j.promise()},getKey:function(){return this._resourceKey}});k("namespace",null,function(a){var c=x[a]||f.u.obj.getByPath(a);if(c)return o().resolve(c).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();
var c=j(a.replace(/\./g,"/"))+".js",b=o(),e=f.settings.res.resolveTimeout,h=null;0<e&&(h=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],b.reject(da(17001,[a])))},e));waitingInfoMap[a]={deferred:b,timer:h};f.u.loadScript(c).done(function(){var c=x[a]||f.u.obj.getByPath(a);c&&waitingInfoMap[a]&&(x[a]=c,delete waitingInfoMap[a],clearTimeout(h),b.resolve(c))}).fail(function(c){clearTimeout(h);delete waitingInfoMap[a];b.reject(c)});return b.promise()});k("ejsfile",/.*\.ejs(\?.*$|$)/,
function(d){var c=o();A.load(j(d)).done(function(b){var d=a(b.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<d.not('script[type="text/ejs"]').length?c.reject(da(7011,null,{url:b.url,path:b.path})):(0===d.length&&c.reject(da(7001,null,{url:b.url,path:b.path})),d.each(function(){var d=a.trim(this.id);d||c.reject(da(7002,null,{url:b.url,path:b.path}));var g=a.trim(this.innerHTML);h.push(new e(d,g))}),c.resolve({url:b.url,path:b.path,templates:h}))}).fail(function(a){var d=
a.detail,d=da(7003,[d.error.status,d.url],d);a.code=d.code;a.message=d.message;a.detail=a.detail;c.reject(a)});return c.promise()});k("jsfile",/.*\.js(\?.*$|$)/,function(a){return f.u.loadScript(j(a))});k("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=j(a);c.appendChild(b);return o().resolve(b).promise()});f.u.obj.expose("h5.res",{dependsOn:function(a){return new h(a)},isDependency:function(a){return a instanceof
h},register:function(a,c,b,e){b&&(e?f.u.obj.expose(e,c):f.u.obj.expose(a,c));x[a]=c;if(b=waitingInfoMap[a])delete waitingInfoMap[a],a=b.deferred,(b=b.timer)&&clearTimeout(b),waitingForImmediateDeferred.push({dfd:a,value:c}),waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),b=0,d=a.length;b<d;b++)a[b].dfd.resolve(a[b].value)},0))},get:function(a){return f.res.dependsOn(a).resolve()}})})();
(function(){function e(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function c(a,b,d,c){if(!Za){Za={};var a=new Pa(null,"a"),e;for(e in a)a.hasOwnProperty(e)&&"__name"!==e&&"__templates"!==e&&"__meta"!==e&&(Za[e]=1);a=Pa.prototype;for(e in a)a.hasOwnProperty(e)&&(Za[e]=null)}for(var g in d)g in Za&&k(Ab,[c,g],{controllerDefObj:d})}function h(b,d){function c(e,g){-1!==a.inArray(e,g)&&
k(Bb,[d],{controllerDefObj:b});l(e,function(a){c(a,g.concat([e]))},!0)}c(b,[])}function j(Oa){function d(c,e){-1!==a.inArray(c,e)&&k(Cb,[Oa.__name],{logicDefObj:Oa});b(c,function(a){d(a,e.concat(c))})}d(Oa,[])}function w(b,d,c){null==b&&k(r,[c],{controllerDefObj:d});!u(b)&&"object"!==typeof b&&k(wb,[c],{controllerDefObj:d});b=a(b);0===b.length&&k(sa,[c],{controllerDefObj:d});1<b.length&&k(Qa,[c],{controllerDefObj:d});b[0].nodeType!==kb&&b[0].nodeType!==$&&k(Db,[c],{controllerDefObj:d})}function o(a,
b,d,c,e){this.controller=a;this.event=b;this.evArg=d;this.selector=c;this.selectorType=e}function p(a){if(!y(this)&&this.__controllerContext.executeListeners)return a.proceed()}function x(a,b,d){var c=C(a.__name,b);d&&c.push(p);return A(a[b],b,c)}function C(a,b){var d=[],c=f.settings.aspects;if(!c||0===c.length)return d;for(var c=I(c),e=c.length-1;-1<e;e--){var g=c[e];if(!g.target||g.compiledTarget.test(a)){var i=g.interceptors;if(!g.pointCut||g.compiledPointCut.test(b))if(E(i))for(g=i.length-1;-1<
g;g--)d=d.concat(i[g]);else d.push(i)}}return d}function A(a,b,d){for(var c=function(a,b,d){return function(){var Oa=this;return d.call(Oa,{target:Oa,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(Oa,this.args)}})}},e=0,g=d.length;e<g;e++)a=c(a,b,d[e]);return a}function d(a,b,d){if(d&&a===lb)return d.rootElement;for(var c=["window","document","navigator"],e=0,g=c.length;e<g;e++){var i=c[e];if(a===i||xa(a,i+"."))return f.u.obj.getByPath(a,U(b))}return d&&xa(a,"this.")?f.u.obj.getByPath(a.slice(5),
d):a}function l(a,b,d){if(d){var c=Aa.get(a.__name);if(c){d=0;for(g=c.childControllerProperties.length;d<g;d++){var e=c.childControllerProperties[d];if((i=a[e])&&!1===b(a[e],a,e))return!1}}else for(e in a){var c=a,g=e,i=d,r=c[g];if($a(g,Ha)&&"rootController"!==g&&"parentController"!==g&&r&&(i||r.__controllerContext&&!r.__controllerContext.isRoot&&(!r.parentController||r.parentController===c))&&!1===b(a[e],a,e))return!1}}else if(!y(a))for(var e=a.__controllerContext.childControllers,d=0,g=e.length;d<
g;d++){var i=e[d];if(!1===b(i,a))return!1}}function b(a,b){var d=Aa.get(a.__name);if(d)for(var c=0,e=d.logicProperties.length;c<e;c++){var g=d.logicProperties[c];if(!1===b(a[g],a,g))return!1}else for(g in a)if(a.hasOwnProperty(g)&&$a(g,q)&&!1===b(a[g],a,g))return!1}function n(a,b,d,c){return!1===b.call(this,a,d,c)?!1:l(a,function(a,d,c){if(n(a,b,d,c)===false)return false})}function m(a,b,d,c){if(!1===l(a,function(a,d,c){if(!a||!1===m(a,b,d,c))return!1})||!1===b.call(this,a,d,c))return!1}function i(a,
b){var d=[];l(a,function(a){(a=a[b])&&d.push(a)});return d}function g(a){var b=a.__controllerContext.cache.bindMap,d=M(a.rootElement),c;for(c in b)for(var e=v(a,b[c],a[c]),g=0,i=e.length;g<i;g++)B(e[g],d)}function v(b,d,c){function e(b){var d=b.handler,c=b.controller;b.originalHandler||(b.originalHandler=d);b.handler=function(){var e=!b.isNativeBind&&f.settings.listenerElementType===1?a(this):this;d.call(c,D(b,arguments),e)}}var g=d.selector,i=d.eventName,r=d.bindTarget,q=d.isGlobal,h=d.isBindRequested;
switch(i){case "mousewheel":c=Na(b,i,c);break;case s:case t:case la:var c=H(b,i,c),m=b.__controllerContext,i=!1;m.h5trackEventHandlerInfos=m.h5trackEventHandlerInfos||[];for(var l=m.h5trackEventHandlerInfos,m=0,n=l.length;m<n;m++){var j=l[m];if(r){if(ma(r,j.bindTarget)){i=!0;break}}else if(g===j.selector&&q===j.isGlobal&&h===j.isBindRequested){i=!0;break}}i||(c=zb(b).concat(c),l.push(d));break;default:c=N(b,i,c)}E(c)||(c=[c]);m=0;for(n=c.length;m<n;m++)d=c[m],e(d),d.isBindRequested=h,d.isGlobal=q,
d.bindTarget=r,d.selector=g,d.controller=b;return c}function B(b,c){var e=b.controller,g=e.rootElement,i=b.selector,r=b.eventName,q=b.handler,h=b.isBindRequested,m=b.isGlobal;b.bindTarget?(b.evSelectorType=oa.SELECTOR_TYPE_OBJECT,P(b)):m?(e=d(i,c,e),h||!u(e)?(b.evSelectorType=oa.SELECTOR_TYPE_OBJECT,b.bindTarget=u(e)?a(e):e,P(b)):(b.evSelectorType=oa.SELECTOR_TYPE_GLOBAL,a(c).delegate(e,r,q)),b.evSelector=e):(b.evSelectorType=oa.SELECTOR_TYPE_LOCAL,b.evSelector=i,h?(b.bindTarget=a(i,g),P(b)):a(g).delegate(i,
r,q));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Fa&&r===s&&null!=f.settings.trackstartTouchAction&&(m?a(b.evSelector,c):a(b.evSelector,g)).each(function(){this.style[ya]=f.settings.trackstartTouchAction}))}function S(b,d,c){var e=b.controller,g=e.rootElement,i=b.selector,r=b.handler,q=b.eventName,h=b.isGlobal;if(b.bindTarget)d=b.bindTarget,g=b.eventName,i=b.handler,b.isNativeBind?d.removeEventListener(g,i):a(d).unbind(g,i);else if(h){if(null==U(d))return;a(d).undelegate(i,
q,r)}else a(g).undelegate(i,q,r);c||(c=e.__controllerContext.boundHandlers,c.splice(a.inArray(b,c),1))}function z(a,b){n(a,function(a){a.__controllerContext.executeListeners=b})}function G(a,b,d){return function(){var c=null,e=a[b],g=a.__name,i=!1,i="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!i&&e)try{c=a[b]({args:a.__controllerContext.args})}catch(r){ba(a,r)}c&&F(c.done)&&F(c.fail)?c.done(d).fail(function(){var b=da(Eb,g,Ra(arguments));ba(a.rootController,null,b)}):d()}}function Y(a,
b){Ba(a)||n(a,function(d){var c,e;"__init"===b?(c=L(d),e=[d.preInitPromise],d.parentController&&e.push(d.parentController.initPromise)):"__postInit"===b?(c=T(d),e=ga(d)):(c=Wa(d),e=za(d));var g=a.__controllerContext;g.waitingPromisesManagerMap=g.waitingPromsiesManager||{};g.waitingPromisesManagerMap[b]=ea(e,G(d,b,c))})}function ga(a){var b=i(a,"postInitPromise");b.push(a.initPromise);return b}function za(a){var b=i(a,"readyPromise");b.push(a.postInitPromise);return b}function L(b){return function(){function d(){var a=
!0;n(b.rootController,function(b){return a=b.isInit});return a}if(!ca(b))if(b.isInit)d()&&Ya(b.rootController);else{b.isInit=!0;var c=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var e=b.rootElement;try{var g=b.__meta,i=b.__controllerContext.childControllers,r;for(r in g)-1!==a.inArray(b[r],i)&&(b[r].__controllerContext.metaRootElement=g[r]&&g[r].rootElement);l(b,function(a){var d=a.__controllerContext.metaRootElement;
delete a.__controllerContext.metaRootElement;a.rootElement||(d=d?R(d,a,b):e,w(d,a.__controllerContext.controllerDef,a.__name),a.rootElement=d,a.view.__controller=a)})}catch(q){ba(b,q);return}g=d();c.resolveWith(b);!ca(b)&&g&&Ya(b.rootController)}}}function T(b){return function(){if(!ca(b)){b.isPostInit=!0;var d=b.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__postInit=ea(ga(b),function(){if(!ca(b)){var c=d.postInitDfd;if(c&&(delete d.postInitDfd,
c.resolveWith(b),!ca(b)&&!d.isExecutedBind))if(d.isRoot){var c=b.__meta,e=d.childControllers,i;for(i in c)-1!==a.inArray(b[i],e)&&(b[i].__controllerContext.metaUseHandlers=c[i]&&c[i].useHandlers);n(b,function(a){var b=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==b&&g(a))});if(!1!==d.managed&&(a(b.rootElement).trigger("h5controllerbound",b),ca(b)))return;K(b)}else b.rootController.isPostInit&&
((!b.parentController.__meta||!1!==b.parentController.__meta.userHandlers)&&g(b),K(b.rootController))}})}}}function Wa(b){return function(){if(!ca(b)){b.isReady=!0;var d=b.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__ready=ea(za(b),function(){if(!ca(b)){var c=d.readyDfd;c&&(delete d.readyDfd,c.resolveWith(b),!ca(b)&&d.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function aa(b,c){if(!u(b))return a(b);var e=a.trim(b);return eb.test(e)?
(e=a.trim(e.substring(1,e.length-1)),a(d(e,M(c.rootElement),c))):a(c.rootElement).find(b)}function N(a,b,d){return{controller:a,eventName:b,handler:d}}function Na(a,b,d){return{controller:a,eventName:typeof document.onmousewheel===ja?"DOMMouseScroll":b,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);
d.call(a,b)}}}function H(b,d,c){var e=null;if(d===s)return N(b,d,c);e=N(b,d,function(b){var d=b.event,e=d.h5DelegatingEvent;if(!e)return c.apply(this,arguments);e=e.type;if("mousemove"===e||"mouseup"===e)e=a(d.currentTarget).offset()||{left:0,top:0},d.offsetX=d.pageX-e.left,d.offsetY=d.pageY-e.top;c.apply(this,arguments)});e.originalHandler=c;return e}function zb(b,d){function c(a,b){for(var d in a)a.hasOwnProperty(d)&&!b[d]&&"target"!==d&&"currentTarget"!==d&&"originalEvent"!==d&&"liveFired"!==d&&
(b[d]=a[d]);b.h5DelegatingEvent=a}function e(d,g,i){return function(f){var m;a:{switch(d){case "touchstart":case "mousedown":m=s;break a;case "touchmove":case "mousemove":m=t;break a;case "touchend":case "mouseup":m=la;break a}m=void 0}var l=m===s;if(!l||!h){var j=0===f.event.type.indexOf("touch");j&&Z(f.event,d);var n=new a.Event(m);c(f.event,n);var y=f.event.target;g&&(y=g);i&&i(n);var db=f.event.originalEvent||f.event;l&&-1===a.inArray(db,Ia)&&(Ia=[],Sa=[]);var o=a.inArray(db,Ia);-1===o&&(o=Ia.push(db)-
1,Sa[o]=!1);if(!Sa[o]&&(!j||h||l))Sa[o]=!0,a(y).trigger(n,f.evArg),h=!0;if(f.event.currentTarget===document&&(m===la&&(Ia=[],Sa=[]),-1!==a.inArray(db,Ia)))Ia.splice(o,1),Sa.splice(o,1);if(l&&h){n.isDefaultPrevented()||n.h5DelegatingEvent.preventDefault();m=n.target;var v=n.clientX,k=n.clientY,sa=j?"touchmove":"mousemove",D=j?"touchend":"mouseup",sb=e(sa,m,function(a){var b=a.clientX,d=a.clientY;a.dx=b-v;a.dy=d-k;v=b;k=d}),B=e(D,m),p=function(a){f.event=a;f.evArg=Q(arguments);sb(f)},Qa=function(a){f.event=
a;f.evArg=Q(arguments);B(f)},K=j?a(m):r;q=function(){Ia=[];Sa=[];K.unbind(sa,p);K.unbind(D,Qa);if(!j&&b.rootElement!==document){a(b.rootElement).unbind(sa,p);a(b.rootElement).unbind(D,Qa)}};K.bind(sa,p);K.bind(D,Qa);!j&&b.rootElement!==document&&(a(b.rootElement).bind(sa,p),a(b.rootElement).bind(D,Qa))}else m===la&&(q(),h=!1)}}}function g(a){return{controller:b,selector:d,eventName:a,handler:e(a),isInnerBindObj:!0}}var i=typeof document.ontouchstart!==ja,r=a(M(b.rootElement)),q=null,h=!1,f=[g("mousedown")];
i&&f.push(g("touchstart"));return f}function ia(b){if("svg"!==b.tagName.toLowerCase()||Ga())return a(b).offset();var d=M(b).createElementNS(pa,"rect"),c=b.viewBox,g=c.baseVal.y;d.setAttribute("x",c.baseVal.x);d.setAttribute("y",g);d.setAttribute("width",1);d.setAttribute("height",1);e(d);b.appendChild(d);c=a(d).offset();b.removeChild(d);return c}function Z(a,b){var d=a.originalEvent;if(d){var c="touchend"===b||"touchcancel"===b?d.changedTouches[0]:d.touches[0],e=c.pageX,g=c.pageY;a.pageX=d.pageX=
e;a.pageY=d.pageY=g;a.screenX=d.screenX=c.screenX;a.screenY=d.screenY=c.screenY;a.clientX=d.clientX=c.clientX;a.clientY=d.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;c=ia(c);g-=c.top;a.offsetX=d.offsetX=e-c.left;a.offsetY=d.offsetY=g}}function Q(a){return 3>a.length?a[1]:Ra(a).slice(1)}function D(a,b){var d=null,c=null;b&&(d=b[0],c=Q(b));var e=d;if(e&&null==e.offsetX&&null==e.offsetY&&e.pageX&&e.pageY){var g=e.target;
if(g.ownerSVGElement)g=g.farthestViewportElement;else if(g===window||g===document)g=document.body;g=ia(g);e.offsetX=e.pageX-g.left;e.offsetY=e.pageY-g.top}return new o(a.controller,d,c,a.evSelector,a.evSelectorType)}function J(a){n(a,function(a){a.rootElement=null;a.view.__controller=null})}function R(b,d,c){null==b&&k(r,[d.__name]);!u(b)&&"object"!==typeof b&&k(wb,[d.__name]);b=c?aa(b,c):a(b);0===b.length&&k(sa,[d.__name]);1<b.length&&k(Qa,[d.__name]);return b.get(0)}function K(b){var d=b.__controllerContext.managed,
c=Ja.controllers;-1===a.inArray(b,c)&&!1!==d&&c.push(b);b.__controllerContext.triggerReadyExecuted=!0;Y(b,"__ready")}function V(a,b){!1===b?Y(a,"__init"):setTimeout(function(){ca(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||Y(a,"__init")},0)}function Ya(a){a.__controllerContext.triggerPostInitExecuted=!0;Y(a,"__postInit")}function mb(a,b){n(a,function(a){var d=ta();d.resolve();var c=a.__controllerContext;c.templatePromise=d.promise();c.initDfd=ta();c.postInitDfd=ta();c.readyDfd=ta();
c.isUnbinding=!1;c.isUnbinded=!1;c.isExecutedBind=!1;c.triggerPostInitExecuted=!1;c.triggerReadyExecuted=!1;c.args=b;a.initPromise=c.initDfd.promise();a.postInitPromise=c.postInitDfd.promise();a.readyPromise=c.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Ca(b,d){var c=null,e=d;a.isPlainObject(e)?c=e.target:e={};c=c?aa(c,b):b.rootElement;return f.ui.indicator.call(b,c,e)}function ka(a,b){var d=[],c=null;m(a,function(a){if(a[b]&&F(a[b])){try{var e=a[b]()}catch(g){c=c||g}wa(e)&&
d.push(e)}});if(c)throw c;return d}function ba(a,b,d){function c(){var a=b||d||q||l;m(g,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var d in b)b.hasOwnProperty(d)&&(b[d]=null)});l?f.rejectWith(g,[l]):f.resolveWith(g);if(a&&(Ja.dispatchEvent({type:"lifecycleerror",detail:a,rootController:g}),b||q))throw b||q;}function e(){l=q||da(Fb,g.__name,Ra(arguments));c()}var g=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);
if(g){if(!Ba(g)){g.__controllerContext.isDisposing=1;try{W(g,d||b)}catch(i){b=b||i}var r,q=null;try{r=ka(g,"__dispose")}catch(h){b=b||h,q=q||h}var f=g.deferred(),l=null;q?e():ea(r,c,e,!0);return f.promise()}}else if(b)throw b;}function W(b,d){if(!ca(b)){b.__controllerContext.isUnbinding=1;nb(b,d);var c;try{ka(b,"__unbind")}catch(e){c=e}n(b,function(a){var b=a.rootElement;if(b){for(var b=M(b),d=a.__controllerContext.boundHandlers,c=0,e=d.length;c<e;c++)S(d[c],b,!0);a.__controllerContext.boundHandlers=
[]}});b.__controllerContext.unbindList={};Ja.controllers=a.grep(Ja.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);J(b);b.__controllerContext.isUnbinded=1;if(c)throw c;}}function na(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?na(a,b.parentController):f.core.view}function y(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function Ba(a){return y(a)||a.__controllerContext.isDisposing}
function ca(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||y(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function nb(a,b){var d=["postInitDfd","readyDfd"],c=[];n(a,function(a){c.push(a);var d=a.__controllerContext.initDfd;d&&!va(d)&&!Ma(d)&&d.rejectWith(a,[b])});for(var e=0,g=d.length;e<g;e++)for(var i=d[e],r=c.length-1;0<=r;r--){var q=c[r],h=q.__controllerContext[i];h&&!va(h)&&!Ma(h)&&h.rejectWith(q,[b])}}function fb(a,b){for(var d=
a.childNodes,c=0,e=d.length;c<e;c++){var g=d[c];if(1===g.nodeType){if(g=fb(g,b))return g}else if(8===g.nodeType){var i=g.nodeValue;if(0===i.indexOf(gb)){var r=i.indexOf("}");if(-1!==r&&(i=i.slice(0,r).match(/id="([A-Za-z][\w-:\.]*)"/))&&i[1]===b)return g}}}return null}function ab(a){var b=this;return function(){return a.apply(b,arguments)}}function Da(a){var b=this;return function(){var d=f.u.obj.argsToArray(arguments);d.unshift(this);return a.apply(b,d)}}function ob(a,b,d){function c(e){f.u.obj.getByPath("h5.core.view")||
k(Gb);d=E(d)?d:[d];for(var g=[],i=0,r=d.length;i<r;i++){var q=Xa(d[i])?d[i]:f.res.dependsOn(d[i]);g.push(q.resolve("ejsfile"))}ea(g,function(d){for(var d=E(d)?d:[d],c=0,e=d.length;c<e;c++)for(var g=d[c].templates,i=0,r=g.length;i<r;i++)try{a.view.__view.register(g[i].id,g[i].content)}catch(q){b.reject(q)}b.resolve()},function(a){var d=a.detail.error.status;e===f.settings.dynamicLoading.retryCount||0!==d&&d!==vb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){c(++e)},f.settings.dynamicLoading.retryInterval)})}
c(0)}function ua(b,d,c,e){var g=u(b),i=g?null:b,b=g?a.trim(b):null,d=a.trim(d),r=!g||eb.test(b),q=pb.test(d);q&&(d=a.trim(a.trim(d.substring(1,d.length-1))));g&&r&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&k(Hb,[c.__name],{controllerDef:c}));return{selector:b,bindTarget:i,isGlobal:r,isBindRequested:q,eventName:d,propertyKey:e}}function Ka(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=
[]}function qb(b){var d=new Ka,c=d.logicProperties,e=d.eventHandlerProperties,g=d.functionProperties,i=d.otherProperties,r=d.bindMap,h=d.childControllerProperties,f={},m;for(m in b)if(-1!==m.indexOf(" ")&&F(b[m])){e.push(m);var l=a.trim(m),n=l.lastIndexOf(" "),l=ua(l.substring(0,n),l.substring(n+1,l.length),b,m),n=l.selector,j=l.eventName,s=l.isGlobal,y=l.isBindRequested;f[n]||(f[n]={});f[n][j]||(f[n][j]={});f[n][j][s]||(f[n][j][s]={});f[n][j][s][y]?k(Ib,[b.__name,n,j],{controllerDef:b}):f[n][j][s][y]=
1;r[m]=l}else $a(m,Ha)&&b[m]&&!F(b[m])?h.push(m):$a(m,q)&&b[m]&&!F(b[m])?c.push(m):F(b[m])?g.push(m):i.push(m);return d}function Ta(){this.logicProperties=[];this.functionProperties=[]}function Ua(a){var b=new Ta,d=b.functionProperties,c=b.logicProperties,e;for(e in a)a.hasOwnProperty(e)&&$a(e,q)?c.push(e):F(a[e])&&d.push(e);return b}function Jb(d,c){function e(b,d,c){d=d.__logicContext.waitingPromises=d.__logicContext.waitingPromises||[];-1===a.inArray(b,d)&&(d.push(b),b.done(c))}function g(r){function q(){if(!r.__logicContext.isCalledReady){var g=
!0;b(r,function(a){return g=a.__logicContext.isReady});if(g){var h=F(r.__ready)&&r.__ready();r.__logicContext.isCalledReady=!0;wa(h)?(i.push(h),h.done(function(){r.__logicContext.isReady=!0;i.splice(a.inArray(h,i),1);r.__logicContext.waitingPromises=null;r===d&&c.resolveWith(r)})):(r.__logicContext.isReady=!0,r.__logicContext.waitingPromises=null,r===d&&c.resolveWith(r))}else for(var f=0,m=i.length;f<m;f++)e(i[f],r,q)}}r.__logicContext.isReady=!1;r.__logicContext.isCalledReady=!1;b(r,g);q()}var i=
[];g(d)}function ma(a,b){if(a===b)return!0;var d=qa(a),c=qa(b);if(!d&&!c)return!1;d=d?a.toArray():[a];c=c?b.toArray():[b];if(d.length!==c.length)return!1;for(var e=0,g=d.length;e<g;e++)if(d[e]!==c[e])return!1;return!0}function X(a,b){(!a||!a.rootElement)&&k(Kb,b)}function O(a,b){(!a||y(a))&&k(Lb,b)}function P(b){var d=b.bindTarget,c=b.eventName,e=b.handler;d&&typeof d.nodeType!==ja||tb(d)||qa(d)?a(d).bind(c,e):!d||!d.addEventListener?b.isBindCanceled=!0:(d.addEventListener(c,e),b.isNativeBind=!0)}
function fa(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var d=a.rootController;n(b,function(a){a.rootController=d})}}function Va(a){this.__controller=a;f.u.obj.getByPath("h5.core.view")&&(this.__view=f.core.view.createView())}function Pa(b,d,c,e,g){for(var i=0,r=ra.length;i<r;i++)ra[i](this);this.__name=d;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,
isRoot:g,boundHandlers:[],controllerDef:c,args:null};(b=c&&c.__defaultArgs)?this.__controllerContext.args=a.extend({},b,e):e&&(this.__controllerContext.args=e);this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=f.log.createLogger(d);this.view=new Va(this)}function bb(){this.rootElement=document;this.controllers=[];a(document).bind(hb,function(a,b){null==b.target&&(b.target=
document);b.indicator=Ca(this,b);a.stopPropagation()})}function ib(){this._init()}function La(b,d,e,g){var i=!g||!g.isInternal;if(!i&&y(g.rootController))return null;var r=d.__name;(!u(r)||0===a.trim(r).length)&&!Xa(d)&&k(rb,null,{controllerDefObj:d});e&&!a.isPlainObject(e)&&k(sb,[r],{controllerDefObj:d});d.__controllerContext&&k(Mb,null,{controllerDefObj:d});d.__defaultArgs&&(a.isPlainObject(d.__defaultArgs)||k(Nb,[r],{controllerDefObj:d}));var q=Aa.get(r);q||c(i,b,d,r);i&&h(d,r);q||(q=qb(d),Aa.register(r,
q));i&&w(b,d,r);var f=new Pa(b?a(b).get(0):null,r,d,e,i),m=i?f:g.rootController,l=ta(),r=l.promise().fail(jb),n=ta(),j=n.promise().fail(jb),s=ta(),o=s.promise().fail(jb),v=ta(),sa=v.promise(),D=g&&g.async;!1===D&&(l.resolve(),n.resolve(),s.resolve(),v.resolve());i||sa.fail(jb);b=f.__controllerContext;b.cache=q;b.preInitDfd=l;b.initDfd=n;b.postInitDfd=s;b.readyDfd=v;f.preInitPromise=r;f.initPromise=j;f.postInitPromise=o;f.readyPromise=sa;b.childControllers=[];for(var t=i?[]:g.promisesForTriggerInit,
n=0,j=q.logicProperties.length;n<j;n++)s=q.logicProperties[n],r=d[s],Xa(r)?(o=r.resolve("namespace"),t.push(o),o.done(function(b,d){return function(c){c=cb(c);f[b]=c;t.splice(a.inArray(d,t),1);t.push(c.readyPromise);c.readyPromise.done(function(b){return function(){t.splice(a.inArray(b,t),1)}}(c.readyPromise))}}(s,o))):f[s]=cb(r);r=a.extend(!0,{},d);d=d.__templates;n=ta();j=n.promise();Xa(d)||d&&0<d.length?ob(f,n,d):n.resolve();j.done(function(){Ba(f)||l.resolveWith(f)}).fail(function(a){l.rejectWith(f,
[a]);ba(f,null,a)});n=0;for(j=q.eventHandlerProperties.length;n<j;n++)s=q.eventHandlerProperties[n],f[s]=x(r,s,!0);n=0;for(j=q.functionProperties.length;n<j;n++)s=q.functionProperties[n],f[s]=x(r,s);n=0;for(j=q.otherProperties.length;n<j;n++)s=q.otherProperties[n],f[s]=r[s];b.managed=g&&g.managed;try{if(f.__construct&&f.__construct({args:f.__controllerContext.args}),Ba(f))return null}catch(p){return ba(m,p),null}i?(f.rootController=f,f.parentController=null):(f.parentController=g.parentController,
f.rootController=g.rootController);if(f.__controllerContext.childControllers){n=0;g=f.__controllerContext.childControllers;for(j=g.length;n<j;n++)g[n].rootController=f.rootController}f.__controllerContext.isExecutedConstruct=!0;g=f.__meta;n=0;for(j=q.childControllerProperties.length;n<j;n++)if(s=q.childControllerProperties[n],d=r[s],b=null,g&&g[s]&&g[s].inheritArgs&&(b=e),Xa(d))o=d.resolve("namespace"),t.push(o),o.done(function(b,d,c){return function(e){e=La(null,a.extend(true,{},e),c,{isInternal:true,
parentController:f,rootController:m,promisesForTriggerInit:t,async:D});if(e==null)return null;f[b]=e;f.__controllerContext.childControllers.push(e);t.splice(a.inArray(d,t),1)}}(s,o,b));else{b=La(null,a.extend(!0,{},r[s]),b,{isInternal:!0,parentController:f,rootController:m});if(null==b)return null;f.__controllerContext.childControllers.push(b);f[s]=b}if(i){var B=function(){t.length===0?V(f,D):ea(t,B)};ea(t,B)}return f}function cb(b){function d(b,c){var e=b.__name;(!u(e)||0===a.trim(e).length)&&k(Ob,
null,{logicDefObj:b});b.__logicContext&&k(Pb,null,{logicDefObj:b});var g=Aa.get(e);g||(c&&j(b),g=Ua(b));for(var r=a.extend(!0,{},b),q=g.functionProperties,h=0,m=q.length;h<m;h++){var n=q[h];r[n]=x(r,n)}r.deferred=ta;r.log=f.log.createLogger(e);r.__logicContext={logicDef:b};r.own=ab;r.ownWithOrg=Da;Aa.register(e,g);F(r.__construct)&&r.__construct();e=g.logicProperties;h=0;for(m=e.length;h<m;h++)n=e[h],g=r[n],Xa(g)?(g=g.resolve(),i.push(g),g.done(function(b,c){return function(e){r[b]=d(e);i.splice(a.inArray(c,
i),1)}}(n,g))):r[n]=d(g);return r}function c(){0===i.length?Jb(r,e):ea(i,c)}var e=f.async.deferred(),g=e.promise(),i=[],r=d(b,!0);r.readyPromise=g;ea(i,c);return r}var pa="http://www.w3.org/2000/svg",oa={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Ha="Controller",q="Logic",s="h5trackstart",t="h5trackmove",la="h5trackend",lb="rootElement",hb="triggerIndicator",eb=/^\{.*\}$/,pb=/^\[.*\]$/,gb="{h5view ",r=6001,sa=6003,Qa=6004,rb=6006,sb=6007,Mb=6008,Bb=6009,Cb=6010,Ab=6011,Hb=
6012,Ib=6013,Ob=6017,Pb=6018,Gb=6029,wb=6030,Eb=6033,Db=6034,Kb=6035,Lb=6036,Fb=6038,Nb=6046,ta=f.async.deferred,wa=f.async.isPromise,xa=f.u.str.startsWith,$a=f.u.str.endsWith,Ea=f.u.str.format,Ra=f.u.obj.argsToArray,qa=f.u.obj.isJQueryObject,Xa=f.res.isDependency,jb=function(){},Ja,Aa,Ia=[],Sa=[],ya="",Fa=function(){var a=document.createElement("div");return typeof a.style.touchAction!==ja?(ya="touchAction",!0):typeof a.style.msTouchAction!==ja?(ya="msTouchAction",!0):!1}(),ra=[],Ga=function(){var b=
null;return function(){if(null!=b)return b;var d=document.createElementNS(pa,"svg");d.setAttribute("width",1);d.setAttribute("height",1);var c=document.createElementNS(pa,"rect");c.setAttribute("x",1);c.setAttribute("y",1);c.setAttribute("width",1);c.setAttribute("height",1);e(c);a(function(){document.body.appendChild(d);var a=d.getBoundingClientRect().top;d.appendChild(c);b=a===d.getBoundingClientRect().top;document.body.removeChild(d)});return b}}();a.extend(o.prototype,oa);a.extend(Va.prototype,
{get:function(a,b){X(this.__controller,"view#get");return na(a,this.__controller).get(a,b)},update:function(a,b,d){X(this.__controller,"view#update");a=aa(a,this.__controller);return na(b,this.__controller).update(a,b,d)},append:function(a,b,d){X(this.__controller,"view#append");a=aa(a,this.__controller);return na(b,this.__controller).append(a,b,d)},prepend:function(a,b,d){X(this.__controller,"view#prepend");a=aa(a,this.__controller);return na(b,this.__controller).prepend(a,b,d)},load:function(a){X(this.__controller,
"view#load");return this.__view.load(a)},register:function(a,b){X(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){X(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){X(this.__controller,"view#isAvailable");return na(a,this.__controller).isAvailable(a)},clear:function(a){X(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){X(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},
bind:function(b,d){X(this.__controller,"view#bind");var c=b;if(u(b)&&0===b.indexOf("h5view#")){for(var e=fb(this.__controller.rootElement,b.slice(7)),c=e.nodeValue,c=c.slice(c.indexOf("}")+1),g=a("<div>").append(c),c=[],i=g[0].childNodes,r=0,q=i.length;r<q;r++)c.push(i[r]);g.empty();g=document.createDocumentFragment();r=0;for(q=c.length;r<q;r++)g.appendChild(c[r]);e.parentNode.insertBefore(g,e.nextSibling)}return this.__view.bind(c,d)}});a.extend(Pa.prototype,{$find:function(b){O(this,"$find");X(this,
"$find");return a(this.rootElement).find(b)},deferred:function(){O(this,"deferred");return ta()},trigger:function(b,d){O(this,"trigger");X(this,"trigger");var c=u(b)?a.Event(b):b;a(this.rootElement).trigger(c,d);return c},own:function(){O(this,"own");return ab.apply(this,Ra(arguments))},ownWithOrg:function(){O(this,"ownWithOrg");return Da.apply(this,Ra(arguments))},bind:function(a,b){O(this,"bind");this.__controllerContext.isRoot||k(6031);this.rootElement=R(a,this);this.view.__controller=this;mb(this,
b?b:null);V(this);return this},unbind:function(){O(this,"unbind");X(this,"unbind");this.__controllerContext.isRoot||k(6031);this.__controllerContext.isExecutedConstruct||k(6037);try{W(this)}catch(a){ba(this,a)}},dispose:function(){O(this,"dispose");this.__controllerContext.isRoot||k(6031);return ba(this)},triggerIndicator:function(b){O(this,"triggerIndicator");X(this,"triggerIndicator");var d={indicator:null};b&&a.extend(d,b);a(this.rootElement).trigger(hb,[d]);return d.indicator},indicator:function(a){O(this,
"indicator");X(this,"indicator");return Ca(this,a)},enableListeners:function(){O(this,"enableListeners");z(this,!0)},disableListeners:function(){O(this,"disableListeners");z(this,!1)},throwError:function(a,b){O(this,"throwError");var d=Ra(arguments);d.unshift(null);this.throwCustomError.apply(this,d)},throwCustomError:function(a,b,d){O(this,"throwCustomError");2>arguments.length&&k(6005);var c=null;b&&u(b)?c=Error(Ea.apply(null,Ra(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;
},on:function(a,b,d){O(this,"on");X(this,"on");a=ua(a,b,this);b=C(this.__name,"");b.push(p);for(var a=v(this,a,A(d,"",b)),b=0,c=a.length;b<c;b++){var e=a[b];e.isInnerBindObj||(e.originalHandler=d);B(e,M(this.rootElement))}},off:function(a,b,d){O(this,"off");X(this,"off");for(var c=ua(a,b,this),a=this.__controllerContext.boundHandlers,e=null,g=c.bindTarget,b=c.eventName,i=c.selector,r=c.isGlobal,c=c.isBindRequested,q=0,f=a.length;q<f;q++){var h=a[q];if(g){if(ma(g,h.bindTarget)&&b===h.eventName&&h.originalHandler===
d){e=h;break}}else if(i===h.selector&&r===h.isGlobal&&c===h.isBindRequested&&d===h.originalHandler){e=h;break}}e&&S(e,M(this.rootElement))},manageChild:function(b){O(this,"manageChild");if(ca(this))k(6041);else if(!b||!b.__controllerContext)k(6039);else if(ca(b))k(6040);else{b.rootController!==b&&k(6042);fa(this,b);var d=Ja.controllers,b=a.inArray(b,d);-1!=b&&d.splice(b,1)}},unmanageChild:function(b,d){O(this,"unmanageChild");if(ca(this))k(6043);else if(b.parentController!==this)k(6044);else if(d=
!1===d?!1:!0,!d&&!b.rootElement)k(6045);else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var c=this.__controllerContext.childControllers,e=a.inArray(b,c);-1!==e&&c.splice(e,1);d?b.dispose():(Ja.controllers.push(b),c=this.__controllerContext.waitingPromisesManagerMap,e=b.__controllerContext.waitingPromisesManagerMap,c&&(c.__postInit&&c.__postInit.remove(b.postInitPromise),c.__ready&&c.__ready.remove(b.readyPromise)),e&&e.__init&&e.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||K(b):Ya(b))}}});f.mixin.eventDispatcher.mix(bb.prototype);a.extend(bb.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,d){for(var c=d&&d.deep,e=d&&d.name?I(d.name):null,g=a(b)[0],i=this.controllers,r=[],q=0,h=i.length;q<h;q++){var f=i[q];!(e&&-1===a.inArray(f.__name,e))&&f.rootElement&&(g===f.rootElement?r.push(f):c&&M(g)===M(f.rootElement)&&a.contains(g,f.rootElement)&&r.push(f))}return r}});
a.extend(ib.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});Aa=new ib;Ja=new bb;f.u.obj.expose("h5.core",{controllerManager:Ja,definitionCacheManager:{clear:function(a){Aa.clear(a)},clearAll:function(){Aa.clearAll()}}});var Za=null;ha.controllerInternal=La;ha.addControllerInstantiationHook=function(a){ra.push(a)};ha.isDisposing=Ba;
f.u.obj.expose("h5.core",{controller:function(a,b,d){2>arguments.length&&k(6032);return La(a,b,d)},logic:cb,expose:function(a){var b=a.__name;b||k(6019,null,{target:a});var d=b.lastIndexOf(".");if(-1===d)window[b]=a;else{var c=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;f.u.obj.expose(c,d)}}})})();(function(){function e(a){return a instanceof Date}function c(a){return function(d){for(var c=a.queries,e=0,g=c.length;e<g;e++){var f=c[e],h=f.compareFunction;if(!h(d[f.prop],f.queryValue))return!1}c=
a.userFunctions;e=0;for(g=c.length;e<g;e++)if(!c[e](d))return!1;c=a.nestedCriterias;e=0;for(g=c.length;e<g;e++)if(!c[e].match(d))return!1;return!0}}function f(a){return function(d){for(var c=a.queries,e=0,g=c.length;e<g;e++){var f=c[e],h=f.compareFunction;if(h(d[f.prop],f.queryValue))return!0}c=a.userFunctions;e=0;for(g=c;e<g;e++)if(!c[e](d))return!0;c=a.nestedCriterias;e=0;for(g=c.length;e<g;e++)if(c[e].match(d))return!0;return!1}}function j(b){var n=[],m=[],i=[],g={queries:n,nestedCriterias:m,userFunctions:i},
l;for(l in b)if(l!==p)if(a.isPlainObject(b[l]))m.push(j(b[l]));else if(F(b[l]))i.push(b[l]);else{var o=b[l],w=E(o)?o[0]:o,z=null,z=w instanceof RegExp?C:e(w)?A:x,G=a.trim(l.replace(/ +/g," ")).split(" "),u=G[1]||"=";(z=z[u])||k(d,[u,a.type(w)]);n.push({prop:G[0],queryValue:o,compareFunction:z})}g.match="or"===b[p]?f(g):c(g);return g}function w(a){this.result=a}function o(a){this._model=a}var p="__op",x={"=":function(a,d){return a===d},"!=":function(a,d){return a!==d},"<":function(a,d){return a<d},
">":function(a,d){return a>d},"<=":function(a,d){return a<=d},">=":function(a,d){return a>=d},between:function(a,d){var c=d[1];return d[0]<=a&&a<=c},"!between":function(a,d){var c=d[1];return a<d[0]||c<a},"in":function(b,d){return-1!==a.inArray(b,d)},"!in":function(b,d){return-1===a.inArray(b,d)}},C={"=":function(a,d){return d.test(a)},"!=":function(a,d){return!d.test(a)}},A={"=":function(a,d){return!e(a)?!1:a.getTime()===d.getTime()},"!=":function(a,d){return!e(a)?!0:a.getTime()!==d.getTime()},"<":function(a,
d){return!e(a)?!1:a.getTime()<d.getTime()},">":function(a,d){return!e(a)?!1:a.getTime()>d.getTime()},"<=":function(a,d){return!e(a)?!1:a.getTime()<=d.getTime()},">=":function(a,d){return!e(a)?!1:a.getTime()>=d.getTime()},between:function(a,d){if(!e(a))return!1;var c=d[0].getTime(),i=d[1].getTime(),g=a.getTime();return c<=g&&g<=i},"!between":function(a,d){if(!e(a))return!1;var c=d[0].getTime(),i=d[1].getTime(),g=a.getTime();return g<c||i<g},"in":function(a,d){if(!e(a))return!1;for(var c=a.getTime(),
i=0,g=d.length;i<g;i++)if(c===d[i].getTime())return!0;return!1},"!in":function(a,d){if(!e(a))return!0;for(var c=a.getTime(),i=0,g=d.length;i<g;i++)if(c===d[i].getTime())return!1;return!0}},d=1,l={};l[d]='演算子"{0}"で"{1}"型の値を比較することはできません';l[2]="{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません";l[3]="setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください";l[4]="setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。";l[5]="addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。";yb(l);a.extend(o.prototype,
{setCriteria:function(a){this._criteria=j(a);return this},execute:function(){var a=[],d;for(d in this._model.items){var c=this._model.items[d];this._criteria.match(c.get())&&a.push(c)}if(this._orderFunction)a.sort(this._orderFunction);else if(this._addedOrders){var e=this._addedOrders,g=e.length;a.sort(function(a,b){for(var d=0;d<g;d++){var c=e[d],f=c.key,c=c.isAsc,h=a.get(f),f=b.get(f);if(h>f)return c?1:-1;if(h<f)return c?-1:1}return 0})}return new w(a)},setOrderFunction:function(a){F(a)||k(3);this._addedOrders&&
k(5);this._orderFunction=a;return this},addOrder:function(a,d){this._model.schema.hasOwnProperty(a)||k(2,["addOrder",a,this._model.name]);this._orderFunction&&k(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:a,isAsc:!1!==d});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this}});Ea={createQuery:function(){return new o(this)}}})();(function(){function e(a){return(a=a&&u(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):
null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function c(b,d){return function rb(b,c){if(!d[b])return!1;for(var e=0,g=d[b].length;e<g;e++)if(-1<a.inArray(d[b][e],c)||rb(d[b][e],c.concat([b])))return!0;return!1}(b,[])}function h(a){return"number"===typeof a&&isNaN(a)}function j(a,b){return null==a||h(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(u(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function w(a,b){return null==a||"number"===typeof a&&parseInt(a)===
a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function o(b,d,c){function e(){g.push(m.call(this,arguments));if(c)throw null;}var g=[];try{if(!a.isPlainObject(b))throw e(Ca),null;wa(b.name)||e(ka);var i=b.base,f=null;if(null!=i)if(!u(i)||0!==i.indexOf("@"))e(ba);else{var q=i.substring(1);d.models[q]?f=d.models[q].schema:e(W,q)}var h=b.schema;!f&&null==h&&e(na);if(!f&&!a.isPlainObject(h))throw e(y),null;}catch(l){k(Q,
null,g)}}function p(b,d,g,i){function f(){q.push(m.call(this,arguments));if(i)throw null;}"object"!==typeof b&&k(J);var q=[];try{if(d){var l=!1,s;for(s in b)b[s]&&!0===b[s].id&&(l&&f(Ba),l=!0);l||f(ca)}var y={},l=function(a){if(null!=a){D&&f(fb,t);v.hasOwnProperty("defaultValue")&&f(La,t);if(null==a.on)f(ab,t);else for(var d=I(a.on),c=0,e=d.length;c<e;c++)if(!b.hasOwnProperty(d[c])){f(ab,t);break}"function"!==typeof a.calc&&f(Da,t);y[t]=I(a.on)}};s=function(a){D&&null==a&&(a="string");var b={};null!=
a&&(u(a)?(D&&"string"!==a&&"integer"!==a&&f(pa,t),b=e(a),b.elmType?(b.dataModel&&(d||f(ua,t,b.dataModel),g.models[b.dataModel]||f(Ka,t,b.dataModel)),"enum"===b.elmType&&null==v.enumValue&&f(qb,t)):f(ua,t,a)):f(ob,t))};var n=function(b,d){if(null!=b)if(a.isPlainObject(b)){for(var c in b){var e=b[c];if(null!=e)switch(c){case "notNull":!0!==e&&!1!==e?f(Ua,t,c):D&&!e&&f(ha,t,c,e);break;case "min":case "max":switch(d.elmType){case "integer":(u(e)||!w(e)||h(e))&&f(P,t,c);break;case "number":(u(e)||u(e)||
!j(e)||Infinity===e||-Infinity===e||h(e))&&f(P,t,c);break;default:f(ma,t,c,d.elmType)}break;case "minLength":case "maxLength":switch(d.elmType){case "string":u(e)||!w(e)||h(e)||0>e?f(O,t,c):D&&"maxLength"===c&&0===e&&f(ha,t,c,e);break;default:f(ma,t,c,d.elmType)}break;case "notEmpty":switch(d.elmType){case "string":!0!==e&&!1!==e?f(Ua,t,c):D&&!e&&f(ha,t,c,e);break;default:f(ma,t,c,d.elmType)}break;case "pattern":switch(d.elmType){case "string":"regexp"!==a.type(e)&&f(X,t,c);break;default:f(ma,t,c,
d.elmType)}}}b.notEmpty&&0===b.maxLength&&f(U,t,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&f(U,t,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&f(U,t,"minLength","maxLength")}else f(Ta,t)},o=function(b,d){null!=b&&("enum"!==d.elmType&&f(da,t),(!E(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&f(ea,t))},t;for(t in b){var v=null==b[t]?{}:b[t],D=d&&!!v.id;wa(t)||f(nb,t);l(v.depend);s(v.type);var p={},B=D&&null==B?"string":v.type;u(B)&&
(p=e(B));n(v.constraint,p);o(v.enumValue,p);D&&v.hasOwnProperty("defaultValue")&&f($,t)}for(var K in y)c(K,y)&&f(qa,K)}catch(la){k(R,null,q)}return!0}function x(a,b){var d=[];try{for(var c in a){var g=a[c];if(g&&(g.hasOwnProperty("defaultValue")||!g.type||!("array"===g.type||e(g.type).dimension))&&g.hasOwnProperty("defaultValue")){var i=g.defaultValue;b[c](i).length&&pushErrorReason(fa,c,i)}}return!0}catch(f){k(R,null,d)}}function C(a,b,c){var g={},i;for(i in a){var f=g,q=i,h;h=c;var m=a[i]||{},s=
[],j=null,y=0,j=m.type,n=m.constraint||{};b&&m.id&&(j=j||"string",n.notNull=!0,"string"===j&&(n.notEmpty=!0));j&&(y=e(j),j=y.elmType,y=y.dimension,s.push(d(j,{manager:h,enumValue:m.enumValue})));n&&s.push(A(n));h=l({checkFuncs:s,dimension:y});f[q]=h}return g}function A(a){return function(b){var d=[];a.notNull&&null==b&&d.push({notNull:a.notNull});a.notEmpty&&!b&&d.push({notEmpty:a.notEmpty});if(null==b)return d;null!=a.min&&b<a.min&&d.push({min:a.min});null!=a.max&&a.max<b&&d.push({max:a.max});null!=
a.minLength&&b.length<a.minLength&&d.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&d.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&d.push({pattern:a.pattern});return d}}function d(b,d){var c=[{type:b}];switch(b){case "number":return function(a,b){return j(a,b)?[]:c};case "integer":return function(a,b){return w(a,b)?[]:c};case "string":return function(a,b){return null==a||u(a)||!b&&a instanceof String?[]:c};case "boolean":return function(a,b){return null==
a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:c};case "enum":return function(b){var e;a:if(e=d.enumValue,h(b)){for(var b=0,g=e.length;b<g;b++)if(h(e[b])){e=!0;break a}e=!1}else e=null===b||-1<a.inArray(b,e);return e?[]:c};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],g=d.manager;return function(a){var b=g.models[e];return!b||"object"!==typeof a&&null!=a?c:null==a||b.has(a)?[]:c}}function l(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var d=a.dimension||
0;return function(a,c){function e(a,i){if(!i){for(var r=0,q=b.length;r<q;r++){var h=b[r](a,c);if(h.length)return g=g.concat(h),!1}return!0}if(null==a)return!0;if(!E(a)&&!f.core.data.isObservableArray(a))return g.push({dimension:d}),!1;r=0;for(q=a.length;r<q;r++)if(!e(a[r],i-1))return!1;return!0}var g=[];e(a,d);return g}}function b(a,b){a._values={};a._nullProps={};for(var d in b)if(b[d]&&n(b[d].type)){var c=Na();c.relatedItem=a;a._values[d]=c;a._nullProps[d]=!0}}function n(a){return!a?!1:-1!==a.indexOf("[]")}
function m(){return{code:arguments[0]}}function i(b,d,c,e){function g(d){for(var d=I(q[d].depend.on),c=0,e=d.length;c<e;c++)if(-1===a.inArray(d[c],b._realProperty)&&-1!==a.inArray(d[c],f))return!1;return!0}function i(b,d){for(var c=0,e=d.length;c<e;c++){var g=h[d[c]];if(g)for(var f=0,q=g.length;f<q;f++){var r=g[f];-1===a.inArray(r,b)&&b.push(r)}}}var f=[],q=b.schema||b._model.schema,h=b._dependencyMap,m={};for(e?f=b._dependProps.slice():i(f,I(c));0!==f.length;){for(var c=[],e=0,l=f.length;e<l;e++){var s=
f[e];if(g(s)){var j=q[s].depend.calc.call(b,d);0!==b._validateItemValue(s,j,!0).length&&k(mb,[b._model?b._model.name:oa,s,j]);m[s]={oldValue:b._values[s],newValue:j};q[s]&&n(q[s].type)?j?(b._values[s].copyFrom(j),b._nullProps[s]=!1):(b._values[s].copyFrom([]),b._nullProps[s]=!0):b._values[s]=j}else c.push(s)}i(c,f);f=c}return m}function g(a,b,d,c){for(var e in d){e in a||k(Ya,[c?c.name:oa,e]);var g=d[e];if(!a[e]||!n(a[e].type)||d.hasOwnProperty(e))g=b(e,g,c&&c._idKey===e),0<g.length&&k(K,[c?c.name:
oa,e],g)}}function v(b,d,c,e){var g=b.schema||b._model.schema,q=[],m;for(m in d)if(!(c&&-1!==a.inArray(m,c))){var l=b._values[m],s=d[m];if(g[m]&&g[m].depend)l!==s&&k(V,[b._model?b._model.name:oa,m]);else{var y=g[m]&&g[m].type;n(y)&&(null==s?(s=[],b._nullProps[m]=!0):b._nullProps[m]=!1);if(y&&y.match(/string|number|integer|boolean/)){var t=s;if(E(t)){for(var t=t.slice(0),s=0,o=t.length;s<o;s++)t[s]=t[s]&&"object"===typeof t[s]?t[s]&&t[s].valueOf&&t[s].valueOf():t[s];s=t}else s=t&&"object"===typeof t&&
t.valueOf?t.valueOf():t}if(null!=s&&y&&y.match(/number|integer/)&&"number"!==typeof s)if(E(s)||f.core.data.isObservableArray(s)){t=0;for(o=s.length;t<o;t++)null!=s[t]&&j(s[t])&&(s[t]=parseFloat(s[t]))}else null!=s&&(s=parseFloat(s));if(!n(y)||!l||!l.equals(s))l===s||h(l)&&h(s)||(y&&-1!==y.indexOf("[]")&&f.core.data.isObservableArray(l)&&(l=l.toArray()),q.push({p:m,o:l,n:s}))}}if(q.length){d={};c=[];t=0;for(m=q.length;t<m;t++)l=q[t],g[l.p]&&n(g[l.p].type)?l.n&&b._values[l.p].copyFrom(l.n):b._values[l.p]=
l.n,d[l.p]={oldValue:l.o,newValue:b.get(l.p)},c.push(l.p);g={type:!0===e?"create":"change",target:b,props:d};a.extend(d,i(b,g,c,e));return g}}function B(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function S(a,b,d){if(a._manager)for(var c=B(a),e=0,g=d.length;e<g;e++){var i=d[e],f=i._values[a._idKey];c[f]||(c[f]=[]);c[f].push({type:b,item:i})}}function z(a,b){if(a._manager){var d=B(a),c=b.target._values[a._idKey];d[c]||
(d[c]=[]);d[c].push({type:Ha,ev:b})}}function G(b){var d={},c;for(c in b)if(b.hasOwnProperty(c)){var e=b[c]?b[c].depend:null;if(e)for(var e=I(e.on),g=0,i=e.length;g<i;g++){var f=e[g];d[f]||(d[f]=[]);-1===a.inArray(c,d[f])&&d[f].push(c)}}return d}function Y(b,d){o(b,d,!0);var c;c=(c=b.base)?d.models[c.slice(1)].schema:{};c=a.extend({},c,b.schema);p(c,!0,d,!0);var e=C(c,!0,d);x(c,e,!0);return new T(c,b,e,d)}function ga(b,d){var c=[],e=[],g=[],i;for(i in b)b[i]&&b[i].depend?e.push(i):c.push(i),b[i]&&
b[i].type&&-1!==b[i].type.indexOf("[]")&&g.push(i);i=G(b);var f={},q;for(q in b){var h=b[q];if(!h||!h.depend){var s=null,s=h&&void 0!==h.defaultValue?h.defaultValue:null;f[q]=s}}return{_realProps:c,_dependProps:e,_aryProps:g,_dependencyMap:i,_createInitialValueObj:function(b){if(!b)return a.extend({},f);var d=a.extend({},f),c;for(c in b)d[c]=b[c];return d},_validateItemValue:function(a,b,c){return d[a](b,c)}}}function za(b,d,c,e){var g=!1,i=["sort","reverse","pop","shift"],q=null;c.addEventListener("changeBefore",
function(c){e&&(b._isRemoved||!e._manager)&&k(D,[b._values[e._idKey],c.method]);var h=f.u.obj.argsToArray(c.args);if(-1===a.inArray(c.method,i)){var s=!0;switch(c.method){case "splice":s=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}s&&(c=b._validateItemValue(d,h),0<c.length&&k(K,d,c))}e?(e._manager&&(c=e._manager,h=e.name,c._oldValueLogs||(c._oldValueLogs={}),c._oldValueLogs[h]||(c._oldValueLogs[h]={}),c=c._oldValueLogs[h],h=b._values[e._idKey],c[h]||(c[h]={}),c[h][d]||
(c[h][d]=b._values[d].toArray())),(g=e._manager?e._manager.isInUpdate():!1)||e._manager.beginUpdate()):q=b._values[d].toArray()});c.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var i={type:"change",target:b,props:{}};i.props[d]={};e?(z(e,i),g?a.stopImmediatePropagation():(e._manager._isArrayPropChangeSilentlyRequested=!0,e._manager.endUpdate(),e._manager._isArrayPropChangeSilentlyRequested=!1)):c.equals(q)||(i.props[d]={oldValue:q,newValue:b._values[d]},b.dispatchEvent(i))}})}
function L(a){wa(a)||k(Z);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function T(a,b,d,c){this.items={};this.size=0;this.name=b.name;this._manager=c;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?M:ia:M;this.schema=a;this._itemConstructor=Wa(a,d,this);c.models[this.name]=this}function Wa(d,c,e){function i(a){b(this,d,h,a);a=h._createInitialValueObj(a);g(d,h._validateItemValue,a,e);v(this,a,null,!0);for(var a=
h._aryProps,c=0,f=a.length;c<f;c++)za(this,a[c],this.get(a[c]),e)}var h=ga(d,c);e._schemaInfo=h;f.mixin.eventDispatcher.mix(i.prototype);a.extend(i.prototype,h,q,{_model:e,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return i}function aa(){}function N(){this.length=0;this._src=[]}function Na(){return new N}function H(a){return a&&a.constructor===N?!0:!1}var M="string",ia="number",Z=15E3,Q=15001,D=15005,J=15008,R=15009,K=15011,V=15012,Ya=15013,mb=15016,Ca=15900,ka=15901,
ba=15902,W=15903,na=15904,y=6,Ba=15800,ca=15801,nb=15802,fb=15803,ab=15804,Da=15805,ob=15806,ua=15807,Ka=15808,qb=15809,Ta=15810,Ua=15811,P=15812,ma=15813,X=15814,O=15815,U=15816,da=15817,ea=15818,$=15819,fa=15820,ha=15821,La=15822,qa=15823,pa=15824,oa="n/a",Ha=2,q={get:function(b){if(0===arguments.length)return a.extend({},this._values);var d=this._model;if(!(d?d.schema:this.schema).hasOwnProperty(b))k(15014,[d?d.name:oa,b]);return this._values[b]},set:function(a){var b=a;2===arguments.length&&(b=
{},b[arguments[0]]=arguments[1]);var d=this._model;d&&(this._isRemoved||!d._manager)&&k(D,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in b&&b[d._idKey]!==this._values[d._idKey]&&k(15003,[d.name,this._idKey]),g(d.schema,d._schemaInfo._validateItemValue,b,d);else{var c=this.validate(b);if(c)throw c;}var c=null,e=d?d._manager.isInUpdate():!1;d&&!e&&d._manager.beginUpdate();this._isInSet=!0;c=v(this,b);this._isInSet=!1;d?(c&&z(d,c),e||d._manager.endUpdate()):c&&this.dispatchEvent(c)},
regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};f.mixin.eventDispatcher.mix(L.prototype);a.extend(L.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&k(Q,null,[m(Ca)]);if(!E(b))return this.models[b.name]?this.models[b.name]:Y(b,this);var d=b.length;d||k(Q,null,[m(Ca)]);for(var c={},e=[],g=0;g<d;g++){var i=
b[g].name;if(this.models[i])l[g]=manager.models[b.name];else try{e.push(i);i=[];b[g].base&&i.push(b[g].base.substring(1));for(var f in b[g].schema){var q=b[g].schema[f];if(q){var h=q.type;h&&"@"===h.substring(0,1)&&(h=-1===h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),i.push(h))}}c[g]={depends:i}}catch(s){k(Q)}}for(var l={size:0};l.size<d;){f={};q=!1;for(g=0;g<d;g++)if(!c[g].registed){for(var i=c[g].depends,h=0,j=i.length;h<j;h++)if(!this.models[i[h]]){f[i[h]]=!0;break}h===j&&(l[g]=Y(b[g],
this),l.size++,q=!0,c[g].registed=!0)}if(!q){var g=!0,t;for(t in f)if(-1===a.inArray(t,e)){g=!1;break}g&&k(15004);k(Q,null,[m(W,t)])}}b=[];for(g=0;g<d;g++)b.push(l[g]);return b},dropModel:function(a){if((a=u(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,d=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var c={},e;for(e in b)if(b.hasOwnProperty(e)){var g;g=this.models[e];var i=b[e],f=[],q=[],s=[],l=[],m=void 0;for(m in i){for(var j=i[m],t=!0,y=[],n=j.length-1;0<=n;n--){var o=j[n],k=o.type;if(k===Ha)y.push(o.ev);else{a:{for(t=0;t<n;t++){var v=j[t].type;if(1===v||3===v){n=j[t];break a}}n=null}if(1===k)n&&3===n.type?f.push({id:m,oldItem:n.item,newItem:o.item}):q.push(o.item);else if(n=
n&&3===n.type?n.item:n?null:o.item)l.push(n),n.dispatchEvent({type:"remove",model:g});t=!1;break}}if(t&&0<y.length){o={};for(n=y.length-1;0<=n;n--)for(var D in y[n].props)o[D]||(H(g.get(m).get(D))?(k=d&&d[g.name]&&d[g.name][m]&&d[g.name][m][D],g.get(m).get(D).equals(k)||(o[D]={oldValue:k})):o[D]={oldValue:y[n].props[D].oldValue});n=!1;for(D in o)k=o[D].oldValue,j=g.get(m).get(D),k===j||h(k)&&h(j)?delete o[D]:(n=g.get(m).get(D),a&&H(n)&&n.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
o[D].newValue=n,n=!0);n&&(y={type:"change",target:y[0].target,props:o},s.push(y),y.target.dispatchEvent(y))}}(g=0===q.length&&0===f.length&&0===l.length&&0===s.length?!1:{created:q,recreated:f,removed:l,changed:s})&&(c[e]=g)}a=!1;for(e in c)a=!0,g=c[e],this.models[e].dispatchEvent({type:"itemsChange",created:g.created,recreated:g.recreated,removed:g.removed,changed:g.changed});c={type:"itemsChange",models:c};a&&this.dispatchEvent(c)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
d={};d[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:d})}});f.mixin.eventDispatcher.mix(T.prototype);a.extend(T.prototype,{create:function(a){this._manager||k(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],c=I(a),e=[],g=this._idKey,i=0,f=c.length;i<f;i++){var q=c[i],h=q[g],s=this._findById(h);s?(e.push(s),(h=v(s,q,[g]))&&z(this,h)):(q=new this._itemConstructor(q),this.items[h]=
q,this.size++,d.push(q),e.push(q))}0<d.length&&S(this,1,d);b||this._manager.endUpdate();return E(a)?e:e[0]},validate:function(a,b){try{var d=this._idKey,c=I(a);"object"!==typeof a&&!E(a)&&k(15007);if(b)for(var e=0,i=c.length;e<i;e++){var f=c[e],q=f[d];(""===q||null==q)&&k(15002,[this.name,d]);var h=this._schemaInfo._createInitialValueObj(f);g(this.schema,this._schemaInfo._validateItemValue,h,this)}else for(var e=0,s=c.length;e<s;e++)f=c[e],g(this.schema,this._schemaInfo._validateItemValue,f,this)}catch(m){return m}return null},
get:function(a){if(E(a)||f.core.data.isObservableArray(a)){for(var b=[],d=0,c=a.length;d<c;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||k(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,c=I(a),e=[],g=[],i=0,f=c.length;i<f;i++)if(this.has(c[i])){var q=u(c[i])||w(c[i],!0)?c[i]:c[i]._values[d],h=this.items[q];delete this.items[q];this.size--;g.push(h);h._model&&
(h._isRemoved=!0);e.push(h)}else g.push(null);0<e.length&&S(this,3,e);b||this._manager.endUpdate();return E(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return u(a)||w(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&F(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ja?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a},createQuery:Ea.createQuery});f.mixin.eventDispatcher.mix(aa.prototype);a.extend(aa.prototype,q,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);g(this.schema,this._validateItemValue,b)}catch(d){return d}return null}});
f.mixin.eventDispatcher.mix(N.prototype);var s={equals:function(a){var b=H(a);if(!b&&!E(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var d=0;d<b;d++){var c=this[d],e=a[d];if(!(c===e||h(c)&&h(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=H(a)?a._src:a;E(a)||k(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=
f.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)H(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},t="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),la;for(la in s)s.hasOwnProperty(la)&&-1===a.inArray(la,t)&&t.push(la);var lb=["concat","slice","splice","filter","map"],hb=["reverse","sort"],eb="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");la=0;for(var pb=t.length;la<
pb;la++){var gb=t[la];N.prototype[gb]=function(b){function d(){var e=c.apply(this._src,arguments);if(-1!==a.inArray(b,hb))e=this;else if(-1!==a.inArray(b,lb)){var g=Na();g.copyFrom(e);e=g}return e}var c=s[b]?s[b]:Array.prototype[b];return-1===a.inArray(b,eb)?d:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=d.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(gb)}f.u.obj.expose("h5.core.data",
{createManager:function(a,b){wa(a)||k(Z);var d=new L(a);if(null!=b){""===b&&(b="window");var c={};c[a]=d;f.u.obj.expose(b,c)}return d},createObservableArray:Na,createObservableItem:function(a){p(a,!1,null,!0);var d=C(a);x(a,d,!0);var c=new aa,d=ga(a,d);b(c,a,d);c.schema=a;for(var e in d)c[e]=d[e];e=d._createInitialValueObj();g(a,d._validateItemValue,e);v(c,e,null,!0);a=0;for(d=c._aryProps.length;a<d;a++)za(c,c._aryProps[a],c.get(c._aryProps[a]));return c},isObservableArray:H,isObservableItem:function(a){return!(!a||
!a.constructor||!a._validateItemValue||F(a.getModel))},createSequence:function(b,d,c){function e(){return h}function g(){var a=h;h+=s;return a}function i(){return h.toString()}function f(){var a=h;h+=s;return a.toString()}function q(){}var h=null!=b?b:1,s=null!=d?d:1,b=1===c?{current:i,next:f,returnType:1}:{current:e,next:g,returnType:2};b.setCurrent=function(a){h=a};a.extend(q.prototype,b);return new q},SEQ_STRING:1,SEQ_INT:2})})();(function(){function e(c){return f.u.obj.isJQueryObject(c)?c:a(c)}
function c(){this.__cachedTemplates={}}var h=f.async.deferred,j={escapeHtml:function(a){return f.u.str.escapeHtml(a)}};a.extend(c.prototype,{load:function(c){var e=h(),j=null;switch(a.type(c)){case "string":a.trim(c)||k(7004);j=[c];break;case "array":j=c;0===j.length&&k(7004);for(var c=0,w=j.length;c<w;c++)u(j[c])?a.trim(j[c])||k(7004):k(7004);break;default:k(7004)}for(var w=[],c=0,A=j.length;c<A;c++)w.push(f.res.get(j[c]));var d=this;ea(w,function(a){for(var a=E(a)?a:[a],b=[],c,f=0,i=a.length;f<
i;f++){for(var g=a[f].templates,h=0,j=g.length;h<j;h++){if(!d.isValid(g[h].content)){c=g[h];break}b.push(g[h])}if(c)break}if(c)try{d.register(c.id,c.content)}catch(o){return o.detail.url=a[f].url,o.detail.path=a[f].path,e.reject(o)}f=0;for(i=b.length;f<i;f++)d.register(b[f].id,b[f].content);e.resolve()},function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,e){"string"!==a.type(e)?k(7E3,null,
{id:c}):(!u(c)||!a.trim(c))&&k(7002,[]);try{var f=new EJS.Compiler(e,"[");f.compile();this.__cachedTemplates[c]=f.process}catch(h){f=h.lineNumber,k(7010,[f?" line:"+f:"",h.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(c,e){var f=this.__cachedTemplates;(!u(c)||!a.trim(c))&&k(7002);(f=f[c])||k(7005,c);var h=e?a.extend(!0,{},e):{},w=h.hasOwnProperty("_h")?new EJS.Helpers(h):new EJS.Helpers(h,{_h:j}),d=null;try{d=f.call(h,h,w)}catch(l){k(7006,
l.toString(),l)}return d},update:function(a,c,f){return e(a).html(this.get(c,f))},append:function(a,c,f){return e(a).append(this.get(c,f))},prepend:function(a,c,f){return e(a).prepend(this.get(c,f))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===ja)this.__cachedTemplates={};else{var e=null;switch(a.type(c)){case "string":e=[c];break;case "array":c.length||k(7002);e=c;break;default:k(7002)}for(var c=0,f=e.length;c<f;c++){var h=e[c];(!u(h)||!a.trim(h))&&
k(7002)}c=0;for(f=e.length;c<f;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var h=null;null==c&&k(7007);E(c)?h=c:(h=a(c),0===h.length&&k(7007),h=h.toArray());(null==e||"object"!==typeof e||E(e)||f.core.data.isObservableArray(e))&&k(7009);return qa.createBinding(h,e)}});var w=new c;w.createView=function(){return new c};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),w.__cachedTemplates[c]=
e.process)})});f.u.obj.expose("h5.core",{view:w})})();(function(){function e(a,b){return!a||a.nodeType!==$?void 0:a.getAttribute(b)}function c(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function h(a,b,d,c){var e=[],b=I(b);if(!0===c)return j(e,a,b,d),e;for(var a=a.childNodes,c=0,g=a.length;c<g;c++)j(e,a[c],b,d);return e}function j(a,b,d,c){if(b.nodeType===$){for(var e=0,g=d.length;e<g;e++){var i=b.getAttribute(d[e]);if(typeof c===ja){if(null!==i){a.push(b);break}}else if(null!==
i&&i==c){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(g=b.length;e<g;e++)j(a,b[e],d,c)}}}function w(b,d){for(var b=I(b),c=[],g=0,i=b.length;g<i;g++){var f=b[g];if(f.nodeType===$&&!(!0===d&&(null!=e(f,B)||null!=e(f,S))))for(var m=h(f,v,void 0,!0),l=0,j=m.length;l<j;l++){for(var n=!0,k=m[l];null!=k&&k!==f;k=k.parentNode)if(null!=e(k,B)||null!=e(k,S)){n=!1;break}n&&c.push(m[l])}}return a(c)}function o(b,d,c){for(var g=[],i=0,f=b.length;i<f;i++){var m=b[i];if(m.nodeType===$){if(!0===
c){if(null!=m.getAttribute(d)){g.push(m);continue}if(null!=e(m,B)||null!=e(m,S))continue}for(var l=h(m,d,void 0,!1),j=0,n=l.length;j<n;j++){var k=a(l[j])[0],v=k.parentNode;(null==e(v,B)&&null==e(v,S)||v===m)&&g.push(k)}}}return a(g)}function p(a){return a&&a.addEventListener&&a.getModel&&!E(a)&&!f.core.data.isObservableArray(a)||f.core.data.isObservableItem(a)?!0:!1}function x(a,b){for(var d=0,c=a.length;d<c;d++){var e=a[d];e.nodeType===$&&e.setAttribute(G,b)}}function u(b,d,g){var i=H++,h=d[0];a(h).empty();
if(g){!E(g)&&!f.core.data.isObservableArray(g)&&k(N);x(d,i);b._addBindingEntry(g,h,i);f.core.data.isObservableArray(g)&&!b._isWatching(g)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(g)]=d,g.addEventListener("change",d));var d=e(h,z),d=c(b._getSrcCtxNode(d).childNodes),m=[];b._loopElementsMap[i]=m;for(var i=h.ownerDocument.createDocumentFragment(),l=g.get?function(a){return g.get(a)}:function(a){return g[a]},j=0,n=g.length;j<n;j++){for(var v=[],o=0,B=d.length;o<
B;o++){var y=Q(d[o]);v.push(y);i.appendChild(y)}m[j]=v;h.appendChild(i);A(b,v,l(j),!1,!0)}}}function A(a,b,c,e,g){b=I(b);if(e)u(a,b,c);else{e=H++;c&&(("object"!==typeof c||E(c)||f.core.data.isObservableArray(c))&&k(N),x(b,e),a._addBindingEntry(c,b,e));var i=p(c);i&&!a._isWatching(c)&&(e=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=e,c.addEventListener("change",e));w(b,g).each(function(){l(this,c,i)});d(a,b,c,!1,g);d(a,b,c,!0,g)}}function d(a,b,d,c,g){var i=
c?"data-h5-loop-context":"data-h5-context";o(b,i,g).each(function(){var b=e(this,i),g=null;d&&(g=p(d)?d.get(b):d[b]);A(a,this,g,c)})}function l(b,d,c){for(var g=e(b,v).split(L),i=[],f=[],h=[],m=0,l=g.length;m<l;m++){var j=g[m];if(-1===j.indexOf(F))0<a.trim(j).length&&(i.push(null),f.push(null),h.push(a.trim(j)));else{var n=j.split(F),j=a.trim(n[0]),n=a.trim(n[1]),o=null,y=T.exec(j);y&&(o=y[1],j=/(\S+)[\s\(]/.exec(j)[1]);0<j.length&&0<n.length&&(i.push(j),f.push(o),h.push(n))}}g=b.tagName.toLowerCase();
m=a(b);l=0;for(j=i.length;l<j;l++){var o=i[l],y=f[l],B=h[l],n=null;d&&(n=c?d.get(B):d[B]);null==o&&("input"===g?(o="attr",y="value"):o="text");switch(o){case "text":null==n?m.text(""):m.text(n);break;case "html":null==n?m.html(""):m.html(n);break;case "class":var o=e(b,ga),B=(y=null==o)?"":" ",w=!1;n&&(w=!RegExp("\\s"+n+"\\s").test(" "+o+" "));m[0].className=(y?"":o)+(w?B+n:"");break;case "attr":y||k(Wa);"input"===g&&"value"===y?null==n?m.val(""):m.val(n):null==n?m.removeAttr(y):m.attr(y,n);break;
case "style":y||k(Wa);null==n?m.css(y,""):m.css(y,n);break;default:k(aa)}}}function b(a,b,d){for(var c=0,e=d.length;c<e;c++){var g=d[c];b.removeChild(g);a._removeBinding(g)}}function n(a){for(var a=a.childNodes,b=[],d=0,c=a.length;d<c;d++)b.push(Q(a[d]));return b}function m(a,b,d,c,e){for(var g=d.ownerDocument.createDocumentFragment(),i=[],f=0,h=e.length;f<h;f++){var m=n(d);i[f]=m;for(var l=0,j=m.length;l<j;l++)g.appendChild(m[l]);A(a,m,e[f])}Array.prototype[c].apply(b,i);return g}function i(a,d,
c,e,g,i){var f=e.length;if(0!==f){for(var h=e[0],m=h,c=1===f?c.length:m+e[1];m<c;m++){var l=g[m];l&&b(a,d,l)}g.splice(h,e[1]);if(!(2>=f)){m=g.length;m=0===m||0===h?d.firstChild:h>=m?null:g[h][0];c=i.ownerDocument.createDocumentFragment();h=[h,0];for(l=2;l<f;l++){for(var j=n(i),k=0,y=j.length;k<y;k++)c.appendChild(j[k]);A(a,j,e[l]);h.push(j)}d.insertBefore(c,m);Array.prototype.splice.apply(g,h)}}}function g(a,b){void 0!==a.nodeType?a.nodeType===$&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=
a[0].parentNode,this._targets=c(a));this._bindRootId=P++;ia[this._bindRootId]=this;for(var d=[],g=0,i=this._targets.length;g<i;g++){var f=this._targets[g];if(f.nodeType===$){f.setAttribute(Y,this._bindRootId);for(var m=h(f,[B,S],void 0,!0),l=0,j=m.length;l<j;l++){var n=M++;m[l].setAttribute(z,n)}m=h(f,v,void 0,!0);l=0;for(j=m.length;l<j;l++)n=m[l],/class\s*:/.test(e(n,v))&&""!=n.className&&n.setAttribute(ga,n.className)}d.push(f.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=
b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};A(this,this._targets,this._rootContext,!1,!0)}var v="data-h5-bind",B="data-h5-context",S="data-h5-loop-context",z="data-h5-dyn-ctx",G="data-h5-dyn-vid",Y="data-h5-dyn-bind-root",ga="data-h5-dyn-cn",F=":",L=";",T=/\(\s*(\S+)\s*\)/,Wa=7100,aa=7101,N=7102,M=0,H=0,P=0,ia={},Z={},Q;(function(){var b=document.createElement("div");b.h5Dummy="a";var d=b.cloneNode(!1),c=void 0!==d.h5Dummy;b.h5Dummy=void 0;c?(d.h5Dummy=void 0,Q=function(b){var d=
b.ownerDocument;return b.nodeType===$?a(a.trim(b.outerHTML),d)[0]:b.cloneNode(!0)}):Q=function(a){return a.cloneNode(!0)}})();a.extend(g.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(d.nodeType===$){this._removeBinding(d);d.removeAttribute(Y);for(var c=h(d,ga,void 0,!0),e=0,g=c.length;e<g;e++)c[e].removeAttribute(ga);d=h(d,z,void 0,!0);e=0;for(c=d.length;e<c;e++)d[e].removeAttribute(z)}}delete ia[this._bindRootId]},_observableArray_changeListener:function(a){var d=
this._getViewsFromSrc(a.target);if(d)for(var c in d)if(d.hasOwnProperty(c)){var g=d[c],f=this._getSrcCtxNode(e(g,z)),h=this._loopElementsMap[c];switch(a.method){case "set":i(this,g,a.target,[a.args[0],1,a.args[1]],h,f);break;case "shift":case "pop":var l=h[a.method]();l&&b(this,g,l);break;case "unshift":l=m(this,h,f,a.method,a.args);g.insertBefore(l,g.firstChild);break;case "push":l=m(this,h,f,a.method,a.args);g.appendChild(l);break;case "splice":i(this,g,a.target,a.args,h,f);break;case "reverse":for(var l=
g,j=h;l.firstChild;)l.removeChild(l.firstChild);for(var k=0,g=j.length;k<g;k++)for(var f=j[k],v=f.length-1;0<=v;v--)l.insertBefore(f[v],l.firstChild);h.reverse();break;case "sort":case "copyFrom":case null:for(var l=this._loopElementsMap,j=c,k=a.target,v=h,h=f,f=0,o=v.length;f<o;f++)b(this,g,v[f]);for(var v=g.ownerDocument.createDocumentFragment(),o=[],f=0,B=k.length;f<B;f++){var y=n(h);o[f]=y;for(var w=0,ca=y.length;w<ca;w++)v.appendChild(y[w]);A(this,y,k.get(f))}g.appendChild(v);l[j]=o}}},_observableItem_changeListener:function(a){var b=
this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var c=this,g;for(g in b)if(b.hasOwnProperty(g)){var i=b[g];w(i,d).each(function(){l(this,a.target,!0)});o(i,B).each(function(){var b=e(this,B);if(!(b in a.props))return!0;c._removeBinding(this);var d=e(this,z),d=c._getSrcCtxNode(d),d=Q(d);this.parentNode.replaceChild(d,this);A(c,d,a.props[b].newValue)});o(i,S).each(function(){var b=e(this,S);if(!(b in a.props)||a.target._isArrayProp(b))return!0;c._removeBinding(this);
A(c,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var c=this._srces[b];if(e(c,z)===a)return c;c=h(c,z,a);if(0<c.length)return c[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);Z[d]=
a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=Z[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,p(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):f.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],
delete this._srcToViewMap[d],this._usingContexts[d]=null))}Z[a]&&delete Z[a]}},_removeBinding:function(a){if(a.nodeType===$){var b=e(a,G);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(G));for(var a=h(a,G),b=0,d=a.length;b<d;b++){var c=a[b];this._removeBindingEntry(e(c,G));c.removeAttribute(G)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});qa={createBinding:function(a,b){return new g(a,b)}}})();(function(){function e(a,c){return null==
a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!c&&(a instanceof Number||!(!(u(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function c(a,c){return!!(null==a||u(a)||!c&&a instanceof String)}function h(a,c){return null==a||"boolean"===typeof a||!c&&a instanceof Boolean}function j(d){var c=d.name;d.isValid?(this.validProperties.push(c),this.validCount++):(this.isValid=!1,this.invalidProperties.push(c),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[c]=
{name:c,value:d.value,violation:[d.violation]});this.validatingProperties.splice(a.inArray(c,this.validatingProperties),1);if(!this.isValid||!this.validatingProperties.length)this.isAllValid=this.isValid}function k(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.isAsync=
a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this.addEventListener(x,j);this.dispatchEvent=function(){this._aborted||k.prototype.dispatchEvent.apply(this,arguments)}}function o(){this.rules=[];this.rulesMap={}}function p(a,c,b,e){A.addValidateRule(a,c,b,e)}var x="validate",C=f.async.isPromise,A=new o;f.mixin.eventDispatcher.mix(k.prototype);k.prototype.abort=function(){this.removeEventListener(x,j);this.dispatchEvent({type:"abort"});this._aborted=!0};a.extend(o.prototype,{addValidateRule:function(a,
c,b,e){if(this.rulesMap[a])for(var f=0,i=this.rules.length;f<i;f++)if(this.rules[f].ruleName===a){this.rules.splice(f,1);break}c={ruleName:a,func:c,priority:e,argNames:b};this.rules.push(c);this.rulesMap[a]=c},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var c=this.rulesMap;a.sort(function(a,d){var e=c[a],i=c[d],e=null==e.priority?-Infinity:e.priority,
i=null==i.priority?-Infinity:i.priority;return e===i?0:i-e})}});p("required",function(a){return null!=a&&""!==a},null,51);p("customFunc",function(a,c){return c(a)},["func"],50);p("assertNull",function(a){return null==a},null,50);p("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50);p("assertFalse",function(a){return null==a||h(a)&&!1==a},null,50);p("assertTrue",function(a){return null==a||h(a)&&!0==a},null,50);p("max",function(a,c,b){return null==a||(e(a,!0)||a instanceof Number)&&
(b?a<=c:a<c)},["max","inclusive"],50);p("min",function(a,c,b){return null==a||(e(a,!0)||a instanceof Number)&&(b?c<=a:c<a)},["min","inclusive"],50);p("future",function(a){return null==a||a instanceof Date&&(new Date).getTime()<a.getTime()},null,50);p("past",function(a){return null==a||a instanceof Date&&a.getTime()<(new Date).getTime()},null,50);p("digits",function(a,e,b){if(null==a)return!0;if(!c(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var f=parseInt(a);return null!=e&&(0>f?-f:f)>=Math.pow(10,
e)?!1:null!=b?(e=a.indexOf("."),-1===e?!0:a.slice(e+1).length<=b):!0},["integer","fraction"],50);p("pattern",function(a,e){return null==a||c(a)&&e.test(a)},["regexp"],50);p("size",function(d,e,b){e=e||0;b=b||Infinity;if(a.isPlainObject(d)){var f=0,h;for(h in d)f++;return e<=f&&f<=b}return null==d||(c(d)||E(d))&&e<=d.length&&d.length<=b},["min","max"],50);f.u.obj.expose("h5.validation",{defineRule:p});f.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],validate:function(c,
e){var b={},f=[],h;for(h in c){if(a.isPlainObject(c[h]))for(var i in c[h])b[i]=c[h][i],f.push(i);b[h]=c[h]}h=null;e&&(h=(a.isArray(e)?e.slice(0):[e]).concat(f));return this._validate(b,h)},addRule:function(a){for(var c in a)this._rule[c]=a[c]},removeRule:function(a){E(a)||delete this._rule[a];for(var c=0,b=a.length;c<b;c++)delete this._rule[a[c]]},disableRule:function(c){for(var c=I(c),e=0,b=c.length;e<b;e++)-1===a.inArray(c[e],this._disableProperties)&&this._disableProperties.push(c[e])},enableRule:function(c){for(var c=
I(c),e=0,b=c.length;e<b;e++){var f=a.inArray(c[e],this._disableProperties);-1!==f&&this._disableProperties.splice(f,1)}},_validate:function(c,e){var b=[],f=[],h=[],i=[],g=null,j=e&&(E(e)?e:[e]),o=!1,p={},z;for(z in this._rule)if(!(e&&-1===a.inArray(z,j)||-1!==a.inArray(z,this._disableProperties))){var G=this._rule[z],u=c[z],ga=!1,F=!1,L=[],T;for(T in G)L.push(T);A.sortRuleByPriority(L);for(var I=0,M=L.length;I<M;I++){T=L[I];var N=G[T];if(c.hasOwnProperty(z)&&null!=N||"required"===T&&N){var P=this._convertBeforeValidate?
this._convertBeforeValidate(u,T):u,N=E(N)?[P].concat(N):[P,N],H=A.getValidateFunction(T);if(!H)break;var H=H.apply(this,N),U={},ia=A.getValidateArgNames(T);if(ia)for(var Z=0,Q=ia.length;Z<Q;Z++)U[ia[Z]]=N[Z+1];C(H)&&!va(H)&&!Ma(H)&&(F=!0,p[z]=p[z]||[],p[z].push(H.promise({ruleName:T,value:P,ruleValue:U})));if(!H||C(H)&&va(H))g=g||{},g[z]||(g[z]={name:z,value:u,violation:[]}),g[z].violation.push(this._createViolation(T,U)),ga=!0}}F?(o=!0,i.push(z)):(ga?f:b).push(z);h.push(z)}var j=!f.length,D=new k({validProperties:b,
invalidProperties:f,validatingProperties:i,properties:h,invalidReason:g,isAsync:o,isValid:j,isAllValid:j?o?null:!0:!1});if(o){var J=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},R=this;for(z in p)b=p[z],f=function(a){return function(){D.dispatchEvent({type:x,name:a,isValid:!0,value:c[a]});J(D)}}(z),h=function(b,c){return function(){if(-1===a.inArray(b,D.invalidProperties)){for(var d,e,g,i=0,f=c.length;i<f;i++){var h=
c[i];if(va(h)){d=h.ruleName;e=h.ruleValue;g=h.value;break}}D.dispatchEvent({type:x,name:b,isValid:!1,value:g,violation:R._createViolation(d,e,arguments)});J(D)}}}(z,b),a.when.apply(a,b).done(f).fail(h)}return D},_createViolation:function(a,c,b){a={ruleName:a,ruleValue:c};b&&(a.reason=f.u.obj.argsToArray(b));return a},_convertBeforeValidate:function(a,c){if(null==a)return a;switch(c){case "max":case "min":return parseFloat(a);case "future":case "past":return new Date(a)}return a}})})();(function(){function e(b){var c=
{},d;for(d in Z){var e=a("<div></div>").addClass(b).addClass(d).appendTo("body"),g=a.camelCase(d);c[g]={};a.map(Z[d],function(a){c[g][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return c}function c(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function h(a,b){for(var c=[],d=a/2,e=0.8*a/2,g=360/b*Math.PI/180,i=1;i<=b;i++){var f=g*i,h=Math.cos(f),f=Math.sin(f);c.push({from:{x:d+e/2*h,y:d+e/2*f},to:{x:d+e*h,y:d+e*f}})}return c}
function j(a){return function(){var b=document.body,c=document.documentElement,d=J?b:R?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function k(a){return function(){var b=J?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function o(a){var b=J?document.body:document.documentElement;return H.isiOS?window["inner"+
a]:b["client"+a]}function p(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&R)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=J?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||
0;return{top:b.top+ka()-c,left:b.left+ba()-d}}function x(){a.each(ia(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function C(a){a=da(a)?a[0]:a;return a===window||a===document||a===document.body}function A(a){return U(M(a)).getComputedStyle(a,null)}function d(b,c){return!U(M(b)).getComputedStyle?a(b).css(c):A(b)[c]}function l(b){if(!U(M(b)).getComputedStyle)return a(b).height();
var c=A(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function b(b){if(!U(M(b)).getComputedStyle)return a(b).width();var c=A(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function n(b,c){if(!U(M(b)).getComputedStyle)return a(b).outerHeight();var d=A(b);return l(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function m(c,
d){if(!U(M(c)).getComputedStyle)return a(c).outerWidth();var e=A(c);return b(c)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)+(d?parseFloat(e.marginLeft)+parseFloat(e.marginRight):0)}function i(b){if(!U(M(b)).getComputedStyle)return a(b).innerHeight();var c=A(b);return l(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function g(c){if(!U(M(c)).getComputedStyle)return a(c).innerWidth();var d=A(c);return b(c)+parseFloat(d.paddingLeft)+
parseFloat(d.paddingRight)}function v(b,c,d,e){function g(){f+=i;f>d?(clearInterval(m),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=h[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var i=Na,f=0,h=[],j=[];c.each(function(a){var e=b[a];j[a]={};h[a]={};var g=A(c[a]),f;for(f in e)h[a][f]=parseFloat(g[f]),j[a][f]=(parseFloat(e[f])-parseFloat(g[f]))*i/d});g();var m=setInterval(g,i)}function B(a,b,c){var e=[];a.each(function(){var a=parseFloat(d(this,"opacity"));
e.push({opacity:a})});a.css({opacity:0,display:"block"});v(e,a,b,c)}function S(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});v(d,a,b,c)}function z(b,d){this.style=a.extend(!0,{},b);if(!d.getElementById(P)){d.namespaces.add("v","urn:schemas-microsoft-com:vml");var e=d.createElement("style");d.getElementsByTagName("head")[0].appendChild(e);e.id=P;e.setAttribute("type","text/css");e.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}e=this.style.throbber.width;
this.group=c("group",d,{width:e+"px",height:this.style.throbber.height+"px"});this.group.className=T;for(var e=h(e,this.style.throbber.lines),g=this.style.throbberLine.color,f=this.style.throbberLine.width,i=0,j=e.length;i<j;i++){var m=e[i],l=m.from,n=m.to,m=c("line",d);m.strokeweight=f;m.strokecolor=g;m.fillcolor=g;m.from=l.x+","+l.y;m.to=n.x+","+n.y;l=c("stroke",d);l.opacity=1;m.appendChild(l);this.group.appendChild(m)}this._createPercentArea(d)}function G(b,c){var d=this,g=a(b);if(g.length){var i=
C(g),g=i?a("body"):g,h=M(g[0]);if(h!==window.document&&(g[0]===h||U(h)===g[0]))g=a(h.body);var m=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},c);this._displayed=!1;this._throbbers=[];this._settings=m;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(m.theme));m.throbber&&a.extend(this._styles.throbber,m.throbber);this._isScreenLock=i;this._$target=g;this._target=1===this._$target.length?this._$target[0]:
this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){d._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){d._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof m.fadeIn?m.fadeIn:-1;this._fadeOutTime="number"===typeof m.fadeOut?m.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=m.showThrobber||m.message;for(var g=f.u.str.format(aa,""===
m.message?'style="display: none;"':"",m.message),i="https"===document.location.protocol?"return:false":"about:blank",j=0,l=this._$target.length;j<l;j++)this._$content=this._$content.add(a(h.createElement("div")).append(g).addClass(Y).addClass(m.theme).addClass(ga).css("display","none")),this._$overlay=this._$overlay.add((m.block?a(h.createElement("div")):a()).addClass(Y).addClass(m.theme).addClass(I).css("display","none")),this._$skin=this._$skin.add((R||J?a(h.createElement("iframe")):a()).attr("src",
i).addClass(Y).addClass(L).css("display","none"));var n=this._isScreenLock&&K?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",n)});h=m.promises;m=function(){d.hide()};g=a.hasOwnProperty("curCSS")?"pipe":"then";E(h)?(h=a.map(h,function(a){return a&&F(a.promise)?a:null}),0<h.length&&ra(f.async.when(h),g,[m,m])):h&&F(h.promise)&&ra(h,g,[m,m])}}var Y="h5-indicator",ga="content",I="overlay",L="skin",T="vml-root",P="h5-vmlstyle",aa='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
N=500,Na=13,H=f.env.ua,da=f.u.obj.isJQueryObject,ia=f.u.obj.argsToArray,Z={throbber:["width","height"],"throbber-line":["width","color"]},Q=!!document.createElement("canvas").getContext,D=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),J="CSS1Compat"!==document.compatMode,R=H.isIE&&6>=H.browserVersion,K=!(H.isAndroidDefaultBrowser||
H.isiOS&&5>H.browserVersion||R||J||H.isWindowsPhone),V=null,ea=null,ha=null,$=null,ka=null,ba=null,W=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),g=0;g<d;g++)if(c[g]+e in b.style)return!0;return!1}}(),ea=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===
typeof window["inner"+a]?window["inner"+a]:J?b["client"+a]:c["client"+a]}}("Height"),ha=j("Height"),$=j("Width"),ka=k("Top"),ba=k("Left"),V=W("animationName");z.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,
d=this.group.childNodes,e=0,g=d.length;e<g;e++){var i=d[e];if("textbox"!==i.nodeName){var f=e+1;i.firstChild.opacity=f==c?"1":f==c+1||f==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var h=this;this._runId=setTimeout(function(){h._run.call(h)},Math.floor(b/a))}},_createPercentArea:function(b){var d=c("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var e=b.find("td");e.width(this.group.style.width);e.height(this.group.style.height);e.css("line-height",this.group.style.height);
e.addClass("throbber-percent");d.appendChild(b[0]);this.group.appendChild(d)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var na=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,g=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";e.style.width=
this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(d);g.style.width=this.style.throbber.width+"px";g.style.height=this.style.throbber.height+"px";g.style.lineHeight=this.style.throbber.height+"px";g.className="throbber-percent";e.appendChild(g);this.positions=h(d.width,this.style.throbber.lines)};na.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();
this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,g=this.style.throbberLine.color,i=this.style.throbberLine.width,f=this.style.throbber.roundTime;b.width=b.width;for(var h=0,m=e.length;h<m;h++){c.beginPath();c.strokeStyle=g;c.lineWidth=i;var j=h+1;c.globalAlpha=j==d?1:j==d+1||j==d-1?0.75:0.4;var l=e[h],j=l.from,l=l.to;c.moveTo(j.x,j.y);c.lineTo(l.x,l.y);c.stroke()}d==
a?d=0:d++;this.highlightPos=d;if(V)b.className="throbber-canvas";else{var n=this;this._runId=setTimeout(function(){n._run.call(n)},Math.floor(f/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};G.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+Y).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,e=function(){var c=a(window);b._isScreenLock&&(x(b._$overlay,b._$content),K||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",
b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},g=0,i=this._$target.length;g<i;g++){var f=this._$target.eq(g),h=this._$content.eq(g),m=this._$skin.eq(g),j=this._$overlay.eq(g),l=this._settings,n=d(f[0],"position");!this._isScreenLock&&"static"===n&&(f.data("before-position",n),f.data("before-zoom",d(f[0],"zoom")),f.css({position:"relative",zoom:"1"}));var n=M(f[0]),k=null;l.showThrobber&&(k=Q?new na(this._styles,n):D?new z(this._styles,n):null);
k&&(b._throbbers.push(k),b.percent(this._settings.percent),k.show(h.children(".indicator-throbber")[0]));f.append(m).append(j);this._showContent&&f.append(h)}g=this._$skin.toArray();Array.prototype.push.apply(g,this._$content.toArray());Array.prototype.push.apply(g,this._$overlay.toArray());g=a(g);0>c?(g.css("display","block"),e()):B(g,c,e);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&K||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<
d;c++){var e=this._$content.eq(c),g=this._$overlay.eq(c);b=this._$target.eq(c);var f=this._$skin.eq(c);if(this._isScreenLock)e=$(),b=ha();else{g.css("display","none");e.css("display","none");var i=b[0];a=i.scrollWidth;b=i.scrollHeight;if(R)a=Math.max(a,i.clientWidth),b=Math.max(b,i.clientHeight);else if(H.isIE&&"function"===typeof getComputedStyle){var i=U(M(i)).getComputedStyle(i,null),h=parseFloat(i.width)+parseFloat(i.paddingLeft)+parseFloat(i.paddingRight);a+=h-parseInt(h)-1;i=parseFloat(i.height)+
parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);b+=i-parseInt(i)-1}g.css("display","block");e.css("display","block");e=a}g[0].style.width=e+"px";g[0].style.height=b+"px";if(R||J)f[0].style.width=e+"px",f[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var f=this._$target.eq(c),h=this._$content.eq(c);if(this._isScreenLock){var j=ea();K?h.css("top",(j-n(h[0]))/2+"px"):h.css("top",ka()+j/2-n(h[0])/2+"px")}else h.css("top",f.scrollTop()+(i(f[0])-n(h[0]))/
2);var j=g(h[0])-b(h[0]),l=0;h.children().each(function(){var b=a(this);if("none"===d(b[0],"display"))return!0;l+=m(this,!0)});h.css("width",l+j);h.css("left",f.scrollLeft()+(g(f[0])-m(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||
b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},g=0,i=this._throbbers.length;g<i;g++)this._throbbers[g].hide();
0>c?(e.css("display","none"),d()):S(e,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!u(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display",
"inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);
this._redrawable=!1;K||R||J?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};f.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new G(b.target,b):new G(b,c)},isInView:function(b,c){var d,e,g,i,f=a(b);if(typeof c===ja)e=o("Height"),i=o("Width"),d=ka(),g=ba();else{i=a(c);if(0===i.find(f).length)return;g=p(i);d=g.top+parseInt(i.css("border-top-width"));g=g.left+parseInt(i.css("border-left-width"));e=i.innerHeight();i=i.innerWidth()}e=d+e;i=g+i;var h=p(f),m=h.top,
h=h.left,j=m+f.outerHeight(),f=h+f.outerWidth();return(d<=m&&m<e||d<j&&j<=e)&&(g<=h&&h<i||g<f&&f<=i)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,N))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,N)}})})();(function(){function e(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return u(b)&&0<b.length?b:null}function c(){var b=e();null!==b&&a(function(){o.addCSS(b);o.bindController(b)})}function h(a,b){for(var c in x)for(var d=
x[c],e=a===c,f=0,h=d.length;f<h;f++){var m=d[f];if(e)m[(b?"enable":"disable")+"Listeners"]()}for(c in C){d=C[c];e=a===c;f=0;for(h=d.length;f<h;f++)if(m=d[f],e)m[(b?"enable":"disable")+"Listeners"]()}}function j(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,f=0;f<e;f++){if(null==d[f])return 1;var h=parseInt(c[f],10),m=parseInt(d[f],10);if(h!==m)return h<m?-1:1}return null!=d[e]?-1:0}var w,o=null,p={},x={},C={},A={},d={},
l=!1,b=!1,n=!1;f.u.obj.ns("h5.ui.jqm");f.ui.jqm.dataPrefix="h5";var m={__name:"JQMController",__ready:function(){var b=this,c=e();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var d=this.$find("#"+c);d.one("h5controllerready.emulatepageshow",function(){n&&d[0]===a.mobile.activePage[0]&&d.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){w||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){w&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});b=!0;var c=c.event.target.id,d=x[c],e=C[c];if(d){for(var f=0,h=d.length;f<h;f++)d[f].dispose();x[c]=[]}if(e){f=0;for(h=e.length;f<h;f++)e[f].dispose();C[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);h(a,!0)},"{rootElement} pagehide":function(c){b||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});b=!1;c=c.event.target.id;h(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(b){var c=!1,d=a(b.event.target),e=b.evArg?b.evArg.prevPage:a("");if(b=x[d[0].id])for(var f=0,h=b.length;f<h;f++)if(!b[f].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});c=!0;break}c||d.trigger("h5jqmpageshow",{prevPage:e})},
"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var c=e();null!==c&&-1===a.inArray(b,x[c])&&(C[c]||(C[c]=[]),C[c].push(b))}},"{rootElement} h5controllerunbound":function(b){var c=b.evArg,b=e();null!==b&&(c=a.inArray(c,C[b]),-1!==c&&C[b].splice(c,1))},loadScript:function(b){var b=a("#"+b),c=a.trim(b.data(this.getDataAttribute("script")));if(0!==c.length)return c=a.map(c.split(","),function(b){return a.trim(b)}),b=!0==b.data(this.getDataAttribute("async")),f.u.loadScript(c,{async:b})},
getDataAttribute:function(a){var b=f.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=p[a],c=A[a];if(b&&0!==b.length){x[a]||(x[a]=[]);for(var d=x[a],e=0,h=b.length;e<h;e++){for(var m=b[e],j=!1,l=0,n=d.length;l<n;l++){var k=d[l];if(k&&k.__name===m.__name){j=!0;break}}j||x[a].push(f.core.controller("#"+a,m,c[e]))}}},addCSS:function(b){if(b=d[b])for(var c=document.getElementsByTagName("head")[0],e=c.getElementsByTagName("link"),f=e.length,h=0,m=b.length;h<
m;h++){for(var j=a.mobile.path.parseUrl(b[h]).filename,l=!1,n=0;n<f;n++)if(a.mobile.path.parseUrl(e[n].href).filename===j){l=!0;break}l||(j=document.createElement("link"),j.type="text/css",j.rel="stylesheet",j.href=b[h],c.appendChild(j))}},removeCSS:function(b){var c=d[b];if(c&&(b=e(),null!==b)){var f=d[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,c)&&-1===a.inArray(b,f)}).remove()}}};f.u.obj.expose("h5.ui.jqm.manager",{init:function(){l||(l=!0,w=0<=j(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){n=!0}),a(function(){o=ha.controllerInternal("body",m,null,{managed:!1});c()}))},define:function(b,g,f,h){u(b)||k(12E3,"id");null!=g&&!u(g)&&!E(g)&&k(12E3,"cssSrc");null!=f&&((u(f)||E(f))&&k(12001),(!a.isPlainObject(f)||!("__name"in f))&&k(12E3,"controllerDefObject"),null!=h&&!a.isPlainObject(h)&&k(12E3,"initParam"));d[b]||(d[b]=[]);p[b]||(p[b]=[]);A[b]||(A[b]=[]);a.merge(d[b],a.map(a.makeArray(g),function(c){return a.inArray(c,d[b])!==-1?null:c}));f&&-1===
a.inArray(f,p[b])&&(p[b].push(f),A[b].push(h));l&&null!==e()?c():this.init()}})})();(function(){function e(c,e,f){this._$arrowbox=a(c).css("display","none");this.setContent(e);a(f&&f.container||f.target.parentElement||document.body).append(this._$arrowbox);this._$arrowbox.data("validation-balloon",this);f=f||{};f.cls&&this._$arrowbox.addClass(f.cls)}a.extend(e.prototype,{show:function(c){if(!this._isDisposed){var e=this._$arrowbox;this.hide();e.css("display","block");if(c){var f=c.direction||"top";
e.addClass(f);var k=c.position,o=a(c.target),c=k?0:o.outerWidth(),p=k?0:o.outerHeight(),k=k?a.extend({},k):{top:o.offset().top,left:o.offset().left};"top"===f||"bottom"===f?(k.left+=(c-e.outerWidth())/2,k.top="top"===f?k.top-(e.outerHeight()+34):k.top+(p+34)):(k.top+=(p-e.outerHeight())/2,k.left="left"===f?k.left-(e.outerWidth()+34):k.left+(c+34));e.css(k)}}},hide:function(){this._isDisposed||this._$arrowbox&&this._$arrowbox.css("display","none")},setContent:function(a){this._isDisposed||(this._$arrowbox.children().remove(),
this._$arrowbox.append(a))},dispose:function(){this._isDisposed||(this.hide(),this._$arrowbox.remove(),this._$arrowbox=null,this._isDisposed=!0)}});f.core.expose({__name:"h5.ui.components.BalloonController",__init:function(){this.view.register("balloon",'<div class="validation-balloon"></div>')},create:function(a,f){var j=this.view.get("balloon");return new e(j,a,f)},getBalloonFromElement:function(c){return a(c).data("validation-balloon")}})})();(function(){var e={required:"{displayName}は必須項目です",
min:function(a){return f.u.str.format("{displayName}は{violation[0].ruleValue.min}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以上の":"より大きい")},max:function(a){return f.u.str.format("{displayName}は{violation[0].ruleValue.max}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{violation[0].ruleValue.regexp}を満たす文字列を入力してください。",digits:"{displayName}は整数部分{violation[0].ruleValue.integer}桁、小数部分{fraction}桁以下の数値を入力してください。",size:function(a){var e="",j="",k=
a.violation[0].ruleValue.min,o=a.violation[0].ruleValue.max;null!=k&&(j=f.u.str.format("{0}以上",k));null!=o&&(e=f.u.str.format("{0}以下",o));return f.u.str.format("{displayName}は{1}{2}の長さでなければいけません。",a,j,e)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません"};
xa={createValidateErrorMessage:function(c,h,j){var k=j&&j.message,j=a.extend({},h,{displayName:j&&j.displayName||c});if(u(k))return f.u.str.format(k,j);if(F(k))return k(j);var k=h.violation[0].ruleName,o=e[k];return o?F(o)?o(j):f.u.str.format(o,j):f.u.str.format("{0}:{1}はルール{2}を満たしません",c,h.value,k)}};f.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},setContainer:function(a){this._container=a},setWrapper:function(a){this._wrapper=a},addMessageSetting:function(a){if(this._setting)for(var e in a)this._setting[e]=
a[e];else this._setting=a},clearMessage:function(){this._container&&a(this._container).empty()},appendMessage:function(c){var e=a(this._container);if(e.length){var j=this._wrapper;j?f.u.str.startsWith(a.trim(j),"<")?(msgElement=a(j),msgElement.text(c)):msgElement=a(document.createElement(j)).html(c):msgElement=document.createTextNode(c);e.append(msgElement)}},getMessageByValidationResult:function(a,e){var f=a.invalidReason[e];return!f?null:xa.createValidateErrorMessage(e,f,this._setting[e])},appendMessageByValidationResult:function(c,
e){for(var f=c.invalidProperties,e=u(e)?[e]:e,k=0,o=f.length;k<o;k++){var p=f[k];e&&-1===a.inArray(p,e)||this.appendMessage(this.getMessageByValidationResult(c,p))}null===c.isAllValid&&c.addEventListener("validate",this.own(function(c){(!c.isValid&&!e||-1!==a.inArray(c.name,e))&&this.appendMessage(xa.createValidateErrorMessage(c.name,c.target.invalidReason[c.name],this._setting[c.name]))}))}})})();(function(){f.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_setSetting:function(a){this._setting=
a},_onValidate:function(a){for(var c=a.properties,f=0,j=c.length;f<j;f++){var k=c[f];this._setStyle(this.parentController._getElementByName(k),k,a)}},_onFocus:function(a,c,f){this._setStyle(a,c,f)},_onKeyup:function(a,c,f){this._setStyle(a,c,f)},reset:function(){for(var e in this._styleAppliedElements){var c=this._styleAppliedElements[e],f=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);this._setValidateState(null,c,f,e)}},_setStyle:function(e,c,f){var j=a.extend({},this._setting,
this._setting.property&&this._setting.property[c]);if(!j.off){var k=j.replaceElement;if(e=F(k)?k(e):k||e)-1!==a.inArray(c,f.validatingProperties)?(this._setValidateState("validating",e,j),f.addEventListener("validate",this.own(function(a){a.name===c&&this._setValidateState(a.isValid?"success":"error",e,j,c)}))):this._setValidateState(-1===a.inArray(c,f.invalidProperties)?"success":"error",e,j,c)}},_setValidateState:function(e,c,f,j){var k=f.errorClassName,o=f.successClassName,p=f.validatingClassName;
a(c).removeClass(k).removeClass(o).removeClass(p);e&&(e=f[e+"ClassName"],a(c).addClass(e),this._styleAppliedElements[j]=c)}})})();(function(){f.core.expose({__name:"h5.ui.validation.Composition",_messageOutputController:f.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._messageOutputController.clearMessage();this._messageOutputController.appendMessageByValidationResult(a)},
reset:function(){this._messageOutputController.clearMessage()},_setChildSetting:function(){var a=this._setting;this._messageOutputController.setContainer(a.container);this._messageOutputController.setWrapper(a.wrapper);var c=a.property,f={},j;for(j in c)f[j]={displayName:c[j].displayName||a.displayName,message:c[j].message||a.message,formatter:c[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(f)}})})();(function(){f.core.expose({__name:"h5.ui.validation.ErrorBalloon",_executedOnValidate:!1,
_messageOutputController:f.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(){this._executedOnValidate=!0},_onFocus:function(a,c,f){this._setErrorBalloon(a,c,f,"focus")},_onBlur:function(a,c,f){this._setErrorBalloon(a,c,f,"blur")},_onKeyup:function(a,c,f){this._setErrorBalloon(a,c,f,"keyup")},reset:function(){this._hideBalloon();this._executedOnValidate=
!1},_setErrorBalloon:function(e,c,f,j){if(this._executedOnValidate){var k=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!k.off){var o=k.replaceElement,p=F(o)?o(e):o||e;if(p)if("blur"===j||e!==document.activeElement&&!a(document.activeElement).closest(e).length)this._hideBalloon();else{var u=k.placement||"top",C=k.container||null;-1!==a.inArray(c,f.validatingProperties)?f.addEventListener("validate",this.own(function(a){e===document.activeElement&&(a.isValid?this._hideBalloon():
this._showBalloon(p,u,C,this._messageOutputController.getMessageByValidationResult(f,a.name)))})):!f.invalidReason||!f.invalidReason[c]?this._hideBalloon():this._showBalloon(p,u,C,this._messageOutputController.getMessageByValidationResult(f,c))}}}},_showBalloon:function(a,c,h,j){this._hideBalloon();if(this._balloonController){var k=this._balloonController.create(j,{target:a,container:h});k.show({target:a,direction:c});this._currentBalloon=k;this._currentBalloonTarget=a}else{var o=f.core.controller(this.rootElement,
f.ui.components.BalloonController);this.manageChild(o);o.readyPromise.done(this.own(function(){this._balloonController=o;this._showBalloon(a,c,h,j)}))}},_hideBalloon:function(){this._currentBalloon&&(this._currentBalloon.dispose(),this._currentBalloon=null);this._currentBalloonTarget=null},_setChildSetting:function(){var a=this._setting,c=a.property,f={},j;for(j in c)f[j]={displayName:c[j].displayName||a.displayName,message:c[j].message||a.message,formatter:c[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(f)}})})();
(function(){var e={__name:"h5.ui.validation.BootstrapErrorBalloon",_hideBalloon:function(){a(this._currentBalloonTarget).tooltip("hide")},_showBalloon:function(c,e,f,k){a(c).attr({"data-placement":e,"data-container":f,"data-original-title":k,"data-animation":!1}).tooltip({trigger:"manual"});a(c).tooltip("show");this._currentBalloonTarget=c}},e=a.extend({},f.ui.validation.ErrorBalloon,e);f.core.expose(e)})();(function(){f.core.expose({__name:"h5.ui.validation.Message",_executedOnValidate:!1,_messageElementMap:{},
_messageOutputController:f.ui.validation.MessageOutputController,_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._executedOnValidate=!0;for(var c=a.validProperties,f=0,j=c.length;f<j;f++){var k=c[f];this._setMessage(this.parentController._getElementByName(k),k,a)}},_onFocus:function(a,c,f){this._setMessage(a,c,f,"focus")},_onBlur:function(a,c,f){this._setMessage(a,c,f,"blur")},reset:function(){for(var a in this._messageElementMap){var c=
this._messageElementMap[name];c&&c.remove()}this._executedOnValidate=!1},_setMessage:function(e,c,f,j){if(this._executedOnValidate){var k=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!k.off)if("blur"===j)this._removeMessage(c);else if(-1!==a.inArray(c,f.validatingProperties))this._removeMessage(c),f.addEventListener("validate",this.own(function(a){a.name===c&&!a.isValid&&("focus"!==j||document.activeElement===e)&&this._setMessage(e,c,f,j)}));else{this._removeMessage(c);
var o=k.appendMessage,k=k.replaceElement,k=F(k)?k(e):k||e,p=this._messageElementMap[c];p||(p=a('<span class="message">'),this._messageElementMap[c]=p);p.html(this._messageOutputController.getMessageByValidationResult(f,c));o?o(p[0],k,c):k&&a(k).after(p)}}},_removeMessage:function(a){this._messageElementMap[a]&&this._messageElementMap[a].remove()},_setChildSetting:function(){var a=this._setting,c=a.property,f={},j;for(j in c)f[j]={displayName:c[j].displayName||a.displayName,message:c[j].message||a.message,
formatter:c[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(f)}})})();(function(){f.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_setSetting:function(a){this._setting=a},_onValidate:function(e){for(var c=e.validatingProperties,f=e.properties,j=0,k=f.length;j<k;j++){var o=f[j];-1!==a.inArray(o,c)?this._showIndicator(this.parentController._getElementByName(o),o,e):this._hideIndicator(o)}},_onFocus:function(e,c,f){-1!==a.inArray(c,f.validatingProperties)?
(e=this.parentController._getElementByName(c),this._showIndicator(e,c,f)):this._hideIndicator(c)},_onKeyup:function(e,c,f){-1!==a.inArray(c,f.validatingProperties)&&this._showIndicator(e,c,f)},reset:function(){for(var a in this._indicators)this._hideIndicator(a);this._executedOnValidate=!1},_showIndicator:function(e,c,h){var j=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!j.off&&(j=j.replaceElement,e=F(j)?j(e):j||e))this._indicators[c]=this._indicators[c]||f.ui.indicator({target:e,
block:!1}),this._indicators[c].show(),h.addEventListener("validate",this.own(function(a){c===a.name&&this._hideIndicator(a.name)})),h.addEventListener("abort",this.own(function(){this._hideIndicator(c)}))},_hideIndicator:function(a){this._indicators[a]&&this._indicators[a].hide()}})})();(function(){var e={style:f.ui.validation.Style,composition:f.ui.validation.Composition,balloon:f.ui.validation.ErrorBalloon,bsBalloon:f.ui.validation.BootstrapErrorBalloon,message:f.ui.validation.Message,asyncIndicator:f.ui.validation.AsyncIndicator},
c=function(b){if(null!=a(b).data("required"))return!0},h=function(b){if(null!=a(b).data("assertFalse"))return!0},j=function(b){if(null!=a(b).data("assertTrue"))return!0},k=function(b){if(null!=a(b).data("nul"))return!0},o=function(b){if(null!=a(b).data("notNull"))return!0},p=function(b){b=a(b).data("max");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},u=function(b){b=a(b).data("min");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),
"true"===a.trim(b[1])]:parseFloat(b)},C=function(b){b=a(b).data("future");if(null!=b)return new Date(b)},A=function(b){b=a(b).data("past");if(null!=b)return new Date(b)},d=function(b){b=a(b).data("pattern");if(null!=b)return RegExp(b)},l=function(b){b=a(b).data("size");if(null!=b){if(E(b)){for(var c=0,d=b.length;c<d;c++)b[c]=parseInt(b[c]);return b}return parseInt(b)}};f.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:f.validation.FormValidationLogic,
_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;var a=this._plugins,c;for(c in a){var d=a[c];d._setSetting&&d._setSetting(this._margePluginSettings(c))}},_margePluginSettings:function(b){this._pluginSetting;var c=this._setting,d=c.output,c=c.property,d=a.extend({},d&&d[b]);d.property={};for(var e in c){var g=a.extend({},c[e]);a.extend(g,g[b]);var h=f.u.obj.getByPath("output."+b,g);delete g.output;d.property[e]=a.extend({},
g,h)}return d},__construct:function(){this._addRuleCreator("required",c);this._addRuleCreator("assertFalse",h);this._addRuleCreator("assertTrue",j);this._addRuleCreator("nul",k);this._addRuleCreator("notNull",o);this._addRuleCreator("max",p);this._addRuleCreator("min",u);this._addRuleCreator("future",C);this._addRuleCreator("past",A);this._addRuleCreator("pattern",d);this._addRuleCreator("size",l)},__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=this.rootElement,
a(this._bindedForm).prop("novalidate",!0));var b={};a(this._getElements()).each(this.ownWithOrg(function(a){var c=a.getAttribute("name");if(c!=null){var d={};b[c]=d;for(var c=0,e=this._ruleCreators.length;c<e;c++){var f=this._ruleCreators[c].key,h=this._ruleCreators[c].func,h=h(a);h!==void 0&&(d[f]=h)}}}));this.addRule(b);if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},addOutput:function(b){if(this.isInit)for(var b=a.isArray(b)?b:[b],c=0,d=b.length;c<d;c++){var f=b[c],
g=e[f];g?this._addOutputPlugin(f,g):this.log.warn('プラグイン"{0}"は存在しません',f)}else this.initPromise.done(this.own(function(){this.addOutput(b)}))},addRule:function(a){this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule(a);this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(b){var b=b&&(!E(b)?[b]:b),c=a(this._getElements()),d=a(this._getInputGroupElements()),e=
this._setting&&this._setting.property||{},g={},f=[],h=this.rootElement;c.each(function(){var c=this.name;f.push(c);var j=g;if(d.find(this).length)var l=a(this).closest("[data-h5-input-group-container]").data("h5-input-group-container");if(l){f.push(l);if(b&&-1===a.inArray(c,b)&&-1===a.inArray(l,b))return;g[l]=g[l]||{};j=g[l]}else if(b&&-1===a.inArray(c,b))return;if("file"===this.type){var l=this.files,k=l.length;if(k){j[c]=j[c]||[];for(var n=0;n<k;n++)j[c].push(l[n])}}else if(c&&!(("radio"===this.type||
"checkbox"===this.type)&&!1===this.checked))k=(l=e[c]&&e[c].valueFunc)?l(h,c):a(this).val(),l&&void 0===k||null==k||(e[c]&&e[c].isArray&&(k=I(k)),void 0!==j[c]?(a.isArray(j[c])||(j[c]=[j[c]]),a.isArray(k)?Array.prototype.push.apply(j[c],k):j[c].push(k)):j[c]=k)});for(var j in e)if((!b||-1!==a.inArray(j,b))&&-1===a.inArray(j,f))c=(c=e[j]&&e[j].valueFunc)&&c(h,j),void 0!==c&&(g[j]=c);return g},setValue:function(b){var c=a(this._getElements()),d={},e={},g;for(g in b)if(a.isPlainObject(b[g]))for(var f in b[g])e[f]=
b[g][f];else e[g]=b[g];b=e;c.each(function(){var c=this.name;if(c){var e=b[c];if("radio"===this.type||"checkbox"===this.type)a.isArray(e)&&(d[c]=d[c]?d[c]+1:0,e=e[d[c]]),a(this).prop("checked",a(this).val()===e);else if(a(this).is("select[multiple]")){if(a(this).val([]),a.isArray(e)&&(d[c]=d[c]||0,e=e.slice(d[c])),null!=e)for(var g=[],f=0,h=e.length;f<h;f++){g.push(e[f]);a(this).val(g);d[c]++;var i=a(this).val(),i=a.isArray(i)?i:[i];if(i.length<g.length){d[c]--;break}}}else a.isArray(e)&&(d[c]=d[c]||
0,e=e[d[c]++]),a(this).val(e)}})},clearValue:function(){a(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?a(this).prop("checked",!1):a(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._waitingValidationResultMap={};var a=this._plugins,c;for(c in a)this._resetPlugin(c,a[c])},validate:function(a){a=this._validate(a);this._callPluginValidateEvent("_onValidate",a);return a},getOutput:function(a){return this._plugins[a]},
"{rootElement} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{rootElement} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{rootElement} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{rootElement} change":function(a){this._pluginElementEventHandler(a,"_onChange")},"{rootElement} click":function(a){this._pluginElementEventHandler(a,"_onClick")},_getElementByName:function(b){var c=this._setting.property&&this._setting.property[b]&&this._setting.property[b].srcElement;
return c||(c=a(this._getElements()).filter('[name="'+b+'"]')[0])?c:(b=a(this._getInputGroupElements()).filter('[data-h5-input-group-container="'+b+'"]')[0])?b:null},_getElements:function(){var b=this.$find("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]');if(!this._bindedForm)return b;var c=a(this._bindedForm).attr("id");return a("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]').filter(function(){var d=a(this),e=d.attr("form");return e&&e===
c||!e&&-1!==b.index(d)}).toArray()},_getInputGroupElements:function(){var b=a("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=a(this),d=c.attr("form");return d&&d===formId||!d&&-1!==b.index(c)}).toArray()},_addRuleCreator:function(a,c){this._ruleCreators.push({key:a,func:c})},_resetPlugin:function(a,c){c.reset&&c.reset.call(c)},_addOutputPlugin:function(a,c){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var d=f.core.controller(this._bindedForm||
this.rootElement,c);d._setSetting&&d._setSetting(this._margePluginSettings(a));this.manageChild(d);this._plugins[a]=d}},_validate:function(a){var c=this.getValue(a),d=this._validationLogic.validate(c,a);this.log.debug("-----------------------------------------");this.log.debug("・validateするデータ");this.log.debug(c);this.log.debug("・validate対象のプロパティ:"+a);this.log.debug("・validate結果");this.log.debug(d);this.log.debug(d.isAsync?"非同期":"同期");this.log.debug("-----------------------------------------");if(d.isAsync){for(var a=
d.validatingProperties,c=0,e=a.length;c<e;c++)this._waitingValidationResultMap[a[c]]=d;d.addEventListener("validate",this.own(function(a){delete this._waitingValidationResultMap[a.name]}))}return d},_createPluginElementEventArgs:function(){},_pluginElementEventHandler:function(b,c){var d=b.event.target;if(this._isFormControls(d)){var e=d.name;if(e){var g;a(this._getInputGroupElements()).find(d).length&&(g=a(d).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var f=this._validate(g||
e);this._callPluginElementEvent(c,d,e,f);g&&(d=this._getElementByName(g),this._callPluginElementEvent(c,d,g,f))}}},_callPluginValidateEvent:function(a,c){var d=this._plugins,e;for(e in d){var g=d[e];g[a]&&g[a].call(g,c)}},_callPluginElementEvent:function(a,c,d,e){var g=this._plugins,f;for(f in g){var h=g[f];if(h[a])h[a](c,d,e)}},_submitHandler:function(a,c){a.event.preventDefault();var d=this.validate();d.isAsync?d.addEventListener("validateComplete",function(){this.isAllValid&&c[0].submit()}):d.isAllValid&&
c[0].submit()},_isFormControls:function(b){return-1!==a(this._getElements()).index(b)}})})();(function(){function e(){j||(j=navigator.geolocation);return j}function c(a,c){this.oblateness=a;this.semiMajorAxis=c}function h(){}var j=null,u=f.env.ua;c.prototype.getOblateness=function(){return this.oblateness};c.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var o=new c(298.257222,6378137),p=new c(299.152813,6377397.155),x=Math.PI/180;a.extend(h.prototype,{isSupported:u.isIE&&9<=u.browserVersion?
!0:!!e(),getCurrentPosition:function(a){var c=f.async.deferred();e().getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(da(2002,null,a))},a);return c.promise()},watchPosition:function(a){function c(){}var d=f.async.deferred(),h=e().watchPosition(function(a){d.notify(a)},function(a){e().clearWatch(h);d.reject(da(2002,null,a))},a);c.prototype.unwatch=function(){e().clearWatch(h);d.resolve()};return d.promise(new c)},getDistance:function(a,e,d,f,b){(!isFinite(a)||!isFinite(e)||!isFinite(d)||
!isFinite(f))&&k(2E3);var h=b?b:o;h instanceof c||k(2001);var b=h.getSemiMajorAxis(),j=h.getOblateness(),a=a*x,e=e*x,d=d*x,h=f*x,f=(a+d)/2,j=Math.sqrt(2*j-1)/j,j=Math.pow(j,2),i=Math.sqrt(1-j*Math.pow(Math.sin(f),2)),j=b*(1-j)/Math.pow(i,3),b=b/i,e=e-h;return Math.sqrt(Math.pow(j*(a-d),2)+Math.pow(b*Math.cos(f)*e,2))},GS_GRS80:o,GS_BESSEL:p});f.u.obj.expose("h5.api",{geo:new h})})();(function(){function e(a){if(a){var b=a.deferred;(va(b)||Ma(b)||!a.result)&&k(l)}}function c(c,d,e){if(a.isPlainObject(c))for(var f in c){var h=
a.trim(f).replace(/ +/g," ").split(" "),i=[];""===h[0]?k(n):1===h.length?(i.push(h[0]),i.push("="),i.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(h[1])?3===h.length&&/^like$/i.test(h[1])?(i.push(h[0]),i.push(h[1]),i.push("?"),i.push("ESCAPE"),i.push('"'+h[2]+'"')):(i.push(h[0]),i.push(h[1]),i.push("?")):k(b);d.push(i.join(" "));e.push(c[f])}}function h(){}function j(){this._multiple=!1}function w(a){this._db=a;this._df=m();this._tx=null;this._tasks=[];this._queue=[]}function o(a,b,c){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=E(c)?c.join(", "):"*";this._orderBy=this._where=null}function p(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?I(c):[];this._df=m();this._multiple=!0}function x(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function C(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}
function A(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function d(a){this._db=a}var l=3E3,b=3003,n=3011,m=f.async.deferred,i=f.u.str.format;a.extend(j.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(w.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof j||k(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===f.length){var e=a(h);c._setResult.apply(c,[e]);d.notify(e,c)}else{for(var i=f.shift(),j=i._statements,k=i._parameters,l=m().resolve().promise(),e=[],n=0,o=j.length;n<o;n++)(function(a,b){l=fa(l,function(){var d=m();c._tx.executeSql(a,b,function(a,b){e.push(i._onComplete(b));
d.resolve()});return d.promise()})})(j[n],k[n]);fa(l,function(){h.push(i._multiple?e:e[0]);b()})}}var c=this,d=this._df,f=this._queue,h=[];try{e(this._getRecentTask());this._addTask(d);for(var i=0,j=f.length;i<j;i++)f[i]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){c._tx=a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(da(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,
b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(k){d.reject(k)}this._df=m();return d.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});o.prototype=new j;a.extend(o.prototype,{where:function(b){!a.isPlainObject(b)&&!u(b)&&k(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!u(b)&&k(3004,["Select","orderBy"]);this._orderBy=I(b);return this},_buildStatementAndParameters:function(){var b=
"",d=this._where,b=i("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(d)){var e=[];c(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else u(d)&&(b+=" WHERE "+d);E(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});p.prototype=new j;a.extend(p.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,d=this._parameters;if(0===b.length)c.push(i("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),d.push([]);else for(var e=0,f=b.length;e<f;e++){var h=b[e];if(null==h)c.push(i("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(a.isPlainObject(h)){var j=[],k=[],l=[],m;for(m in h)j.push("?"),k.push(m),l.push(h[m]);c.push(i("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),j.join(", ")));d.push(l)}}},_onComplete:function(a){return a.insertId}});x.prototype=new j;a.extend(x.prototype,{where:function(b){!a.isPlainObject(b)&&!u(b)&&k(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=this._values,e=[],f;for(f in b)e.push(f+" = ?"),this._parameters.push(b[f]);b=i("UPDATE {0} SET {1}",this._tableName,e.join(", "));a.isPlainObject(d)?(f=[],c(d,f,this._parameters),b+=" WHERE "+f.join(" AND ")):u(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});C.prototype=new j;a.extend(C.prototype,{where:function(b){!a.isPlainObject(b)&&
!u(b)&&k(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=i("DELETE FROM {0}",this._tableName);if(a.isPlainObject(d)){var e=[];c(d,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else u(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});A.prototype=new j;a.extend(A.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(d.prototype,{select:function(a,b,c){u(a)||k(3001,"select");!E(b)&&"*"!==b&&k(3005,"select");return new o(this.transaction(c),a,b)},insert:function(b,c,d){u(b)||k(3001,"insert");null!=c&&!E(c)&&!a.isPlainObject(c)&&k(3006,"insert");return new p(this.transaction(d),b,c)},update:function(b,c,d){u(b)||k(3001,"update");a.isPlainObject(c)||k(3006,"update");return new x(this.transaction(d),b,c)},del:function(a,b){u(a)||k(3001,"del");return new C(this.transaction(b),a)},sql:function(a,b,c){u(a)||
k(3007,"sql");null!=b&&!E(b)&&k(3008,"sql");return new A(this.transaction(c),a,b)},transaction:function(a){void 0!=a&&!(a instanceof w)&&k(3002,"transaction");return a?a:new w(this._db)}});a.extend(h.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,e){if(this.isSupported)return a=openDatabase(a,b,c,e),new d(a)}});f.u.obj.expose("h5.api",{sqldb:new h})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:f.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,f.u.obj.serialize(e))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var e=this._storage,f=0,k=e.length;f<k;f++){var o=e.key(f);a(f,o,this.getItem(o))}}});f.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();(function(){var e,c,h,j;function w(a){for(var a=f.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)Da(a[b])||a[b].dispose()}function o(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function p(b){b=a(b).closest("["+
J+"],["+R+"]");return b.length?b.get(0):null}function x(b){b=a(b).closest("["+V+"],["+K+"]");return b.length?b.get(0):null}function C(a,b){if(a===b)return!0;var c=x(a),d=b?x(b):null;return c!==d?!1:p(a)===b}function A(b,c,e){var g=b?b:document.body,b=a(g);if(0!==b.length){1!==b.length&&k(Ba);if(!pa){var h=o(g,"["+V+"]");0===h.length&&(h=o(g,"main"),0===h.length&&g===document.body&&(h=a(g)),0<h.length&&h.eq(0).attr(V,V))}if(b.is("["+K+"]"))fa(g);else if(b.is("["+V+"]"))fa(g,!0);else{var i=a(g).is("["+
J+"],["+R+"]")&&!d(g),j=i?f.async.deferred():null,m=a(g).is("["+J+"],["+R+"]")?g:p(g),u=!1;o(g,"["+Q+"]").each(function(){for(var b=this.getAttribute(Q).split(","),f=0,h=b.length;f<h;f++){var q=a.trim(b[f]);if(""===q||c&&q!==c)return!0;if(!d(this,q)){if(!C(this,m))return!0;var k=!1;i&&!u&&this===g&&(k=u=!0);l(this,q);q=n(q,this,k?e:null);k&&q.done(function(a){j.resolve(a)})}}});b.find("["+V+"],["+K+"]").each(function(){if(C(this,m))return!0;var b=a(this);b.is("["+V+"]")?fa(this,!0):b.is("["+K+"]")&&
fa(this)});if(i)return j.promise()}}}function d(b,c){var d=a(b).attr(D);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function l(b,c){var d=a(b).attr(D)||"";d&&(d+=",");a(b).attr(D,d+c)}function b(b,c,e){var g=b?b:document.body,h=f.async.deferred(),b=!1,i=null,j=a(g).find(">["+J+"]");0<j.length&&(i=j.eq(0),d(i)||(b=!0,i.is("["+Q+"]")||(l(i,Va.__name),i=f.core.controller(i,Va,e),h.resolve(i))));b||(g=a(g).children().eq(0).filter("["+
R+"]"),0<g.length&&!d(g)&&(b=!0,g.attr(J,J),j=g,g.is("["+Q+"]")||(l(g,Va.__name),i=f.core.controller(g,Va,e),h.resolve(i))));b||k(ca);c=A(j.get(0),c,e);Ma(h)||c.done(function(a){h.resolve(a)});return h.promise()}function n(a,b,c){var d=f.async.deferred();f.res.get(a).then(function(a){a=f.core.controller(b,a,c);d.resolve(a)});return d.promise()}function m(a,b){this.type=a;this.data=b}function i(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};
a(window).on("message",this._recv)}function g(a,b){var c=Pa[a];c||(c=new i(a,b),Pa[a]=c);return c}function v(){this._recvChannel=new i(na,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new i(y,window.opener)}function B(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=f.core.data.createSequence(1,1,f.core.data.SEQ_INT);this._sendChannel=g(na,a);this._recvChannel=g(y,a);this._recvChannel.subscribe(this._receive,this)}function E(a){var a=
a||{},b;if(E._instance)b=E._instance;else{b=E._instance=this;var d=!!window.history.pushState;b.urlHistoryMode=a.urlHistoryMode||W.HISTORY;switch(b.urlHistoryMode){case W.HASH:b.urlHistoryActualMode=e;break;case W.NONE:b.urlHistoryActualMode=c;break;case W.FULLRELOAD:b.urlHistoryActualMode=h;break;case W.HISTORY:case W.HISTORY_OR_HASH:case W.HISTORY_OR_ERROR:case W.HISTORY_OR_NONE:case W.HISTORY_OR_FULLRELOAD:d&&(b.urlHistoryActualMode=j)}if(!b.urlHistoryActualMode&&!d)switch(b.urlHistoryMode){case W.HISTORY_OR_ERROR:k(xa);
return;case W.HISTORY:case W.HISTORY_OR_HASH:b.urlHistoryActualMode=e;break;case W.HISTORY_OR_NONE:b.urlHistoryActualMode=c;break;case W.HISTORY_OR_FULLRELOAD:b.urlHistoryActualMode=h}b.urlHistoryActualMode||k(ya,b.urlHistoryMode);a.baseUrl&&(d=new z(a.baseUrl),b._baseUrl=d.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));b._urlMaxLength=a.urlMaxLength||URL_MAX_LENGTH;var f=b._onChange;b._onChange=function(){return f.apply(b,arguments)}}a.routes&&(b._routes=b._routes.concat(a.routes));return b}function z(a){null!=
a&&(a=a.match(z.regExp),this.href=a[0]||"",this.protocol=a[1]||"",this.host=a[2]||"",this.hostname=a[3]||"",this.port=a[4]||"",this.pathname=a[5]||"",this.dir=a[6]||"",this.file=a[7]||"",this.search=a[8]||"",this.hash=a[9]||"")}function G(a){this.__controller=a}function M(){}function U(b){b=a(b);if(!1===b.children().eq(0).is("["+J+"],["+R+"]")){b.wrapInner(a("<div "+J+"></div>"));var c=b.attr(Q);c&&b.removeAttr(Q).children().attr(Q,c)}}function ea(b,c,d){var e=f.async.deferred();f.ajax({url:b,dataType:"html",
method:c||"get",data:d}).done(function(b){var c=b.replace(bb,"").match(ib),b=c?"<div "+qa+" "+c[1]+">"+c[2]+"</div>":b;La.test(b)&&(b="<div "+K+">"+b+"</div>");b=a(b);c=o(b,"["+V+"]");0===c.length&&(c=o(b,"main"));0<c.length&&(b=c.eq(0),b.attr(V,V));if(1<b.length||!a(b).is("["+V+"],["+K+"]")&&!b.is("["+qa+"]"))b=a("<div "+K+"></div>").append(b);U(b);e.resolve(b.children())}).fail(function(a){e.reject(a)});return e}function L(b,c,d){u(b)?c=ea(b,c,d):(c=f.async.deferred(),b=null==b?a(cb).get(0):f.u.obj.isJQueryObject(b)?
b[0]:b,c.resolve(b));return c.promise()}function T(){}function da(b,c){var d="";a.each(b,function(a,b){d&&(d+="&");if(!c&&("args"===a||"serverArgs"===a))d+=da(b,a);else if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var g="",h=0;h<b.length;h++)g&&(g+="&"),g+=e+"[]",g+="=",g+=encodeURIComponent(b[h]);d+=g}else d+=e,d+="=",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(ua+a):d+encodeURIComponent(Ka+a),d+="=",d+=encodeURIComponent(f.u.obj.serialize(b).substring(2))});
return d}function aa(b){aa._checkKeyRegExp||(aa._checkKeyRegExp=RegExp("^("+ra+"|"+Ta+")?(.+)"),aa._checkArrayRegExp=/^(.*)\[\]$/);var c={},d=aa._checkKeyRegExp,e=aa._checkArrayRegExp;a.each(b.split("&"),function(a,b){var b=b.split("="),g=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),i=g.match(d);if(i){g=i[1]||"";i=i[2];if(!g){c.serverArgs=c.serverArgs||{};var j=i.match(e);if(j){j=j[1];j in c.serverArgs===false&&(c.serverArgs[j]=[]);c.serverArgs[j]instanceof Array&&c.serverArgs[j].push(h)}else c.serverArgs[i]=
h}if(g===ua){c.args=c.args||{};c.args[i]=f.u.obj.deserialize(Ca+h)}else g===Ka&&(c[i]=f.u.obj.deserialize(Ca+h))}});return c}function N(a){if(!a)return"";N._regExp||(N._regExp=RegExp("(^|&)(?:"+ra+"|"+Ta+")[^=]*=.*?(?=&|$)","g"));var b=N._regExp,c=new z(a),a=c.pathname,c=c.search||"";(c=c.substring(1).replace(b,""))&&(c="?"+c);return a+c}function $(a){var b=new z(a),a=b.pathname||"",b=aa((b.search||"").substring(1));b.to||(b.to=a);return b}function H(b){var b=a.extend(!0,{},b),c=b.to,d="",e="";ma.test(c)||
(delete b.to,c=N(c),e=new z(c),d=e.pathname,e=e.search);(b=da(b))&&(e=e+(e?"&":"?")+b);return d+e}function fa(b,c){null==b&&(b=a("<div></div>").get(0));a(b).is("["+ja+"]")&&k(wa);var d=c;c?a(b).is(":not(["+V+"])")&&a(b).attr(V,V):(a(b).is(":not(["+K+"])")&&a(b).attr(K,K),d=f.settings.scene.followTitle);d=ha.controllerInternal(b,Ha,{isMain:c,followTitle:d},{async:!1});a(b).attr(ja,ja);return d}function ia(){va||(va=!0,A())}function Z(a,b){return f.core.controllerManager.getControllers(a||document.body,
{name:Ha.__name,deep:b&&!1===b.deep?!1:!0})}var Q="data-h5-controller",D="data-h5-dyn-controller-bound",J="data-h5-default-scene",R="data-h5-scene",K="data-h5-scene-container",V="data-h5-main-scene-container",ja="data-h5-dyn-container-bound",qa="data-h5-dyn-dummy-body",Ca="2|",ka={NORMAL:"normal",ONCE:"once",SILENT:"silent"},ba={GET:"get",POST:"post"},W={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",
HISTORY_OR_FULLRELOAD:"historyOrFullreload"};e="hash";j="history";c="none";h="fullreload";var na="__h5__RMI",y="__h5__RMI_Result",Ba=1E5,ca=100001,wa=100007,xa=100011,ya=100012,Da=ha.isDisposing,va=!1,ua=f.settings.scene.clientQueryStringPrefix,Ka=f.settings.scene.clientFWQueryStringPrefix,ra=null,Ta=null,Ua=f.settings.scene.urlHistoryMode,Ea=null,ma=/Controller$/,X=null,O=null,Fa=null,Ga=null,Va={__name:"h5.scene.DummyController"};f.mixin.eventDispatcher.mix(i.prototype);a.extend(i.prototype,{send:function(a){this._closed?
alert("クローズ済みのチャネルです。送信できません。"):(a=new m(this.type,a),this._targetWindow.postMessage(f.u.obj.serialize(a),location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=f.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}for(var a=this._subscribers,d=0,e=a.length;d<e;d++){var g=a[d];g.func.call(g.thisObj,b.data)}this.dispatchEvent({type:"message",
data:b.data})}});var Pa={};a.extend(v.prototype,{_receive:function(a){var b=f.core.controllerManager.getControllers(document.body)[0],c=a.id,d=a.method,a=a.args;!b[d]||F(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,c,d){var d=I(d),e=void 0;try{e=b[c].apply(b,d)}catch(g){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;f.async.isPromise(e)?e.done(function(){var b=f.u.obj.argsToArray(arguments);
h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=f.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});a.extend(B.prototype,{invoke:function(a,b){var c=f.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];
var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});a.extend(E.prototype,{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),
a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(u(f.test)){if(c===f.test){d=f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(b){b=b||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,(!b||!b.silent)&&this._onChange(),this.urlHistoryActualMode){case e:a(window).on("hashchange",
this._onChange);break;case j:a(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};if(this._started){this._checkUrlLength(a,{throwOnError:!0});var d=!1,f=this.urlHistoryActualMode;switch(b.mode){case "silent":d=!0;break;case "none":f=c;break;case "fullreload":f=h}var g=this._toAbusolute(a);switch(f){case e:d&&(this._silentOnce=!0);this.compareUrl(g)?this._onChange():b.replaceHistory?location.replace("#"+g):location.hash=g;break;case j:d&&(this._silentOnce=!0);this.compareUrl(g)||
(b.replaceHistory?history.replaceState(null,null,g):history.pushState(null,null,g));this._onChange();break;case h:this.compareUrl(g)?location.reload():b.replaceHistory?location.replace(g):location.href=g;break;case c:this.evaluate(g)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case e:a(window).off("hashchange",this._onChange);break;case j:a(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;
if((new z(a)).protocol)return a.length<=this._urlMaxLength;var c=this._toAbusolute(a);this.urlHistoryActualMode===e&&(c=window.location.pathname+(window.location.search||"")+"#"+c);c=P(c);b.writeBack&&(b.url=c,b.urlLength=c.length,b.urlMaxLength=this._urlMaxLength);return c.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,
b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){var b=null,a=new z(a),b=this._getRouterLocation();a.isSearch()?b=b.pathname+a.search+a.hash:a.isHash()?b=b.pathname+b.search+a.hash:(b=a.pathname+a.search+a.hash,0!==b.indexOf("/")&&(b=this._getBaseDir()+b));b=P(b);a=new z(b);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b)var c=this._getRouterLocation(),b=c.pathname+c.search;0!==a.indexOf("/")&&(a=this._toAbusolute(a));
0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===e&&location.hash?new z(location.hash.substring(1)):new z(location.href)}});a.extend(z.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&
!this.search&&this.hash}});z.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&new v;a.extend(G.prototype,{navigate:function(a){Da(this.__controller)||this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(Da(this.__controller))return null;var a=x(this.__controller.rootElement);return!a?null:Z(a)[0]}});a.extend(function(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===
d?!0:!1);this._rmi=new B(a);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new M},setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=f.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=f.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=
this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var bb=/<\!--(?:\s|\S)*?--\>/g,ib=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,La=/^\s*(?!\s|<)/,cb='<div class="h5-scene"></div>';a.extend(T.prototype,{onChange:function(b,c){var d=f.async.deferred();a(b).empty();a(c).appendTo(b);d.resolve();return d.promise()},onChangeStart:function(a){this._ind=f.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});
var pa=null,oa={__name:"h5.scene.NotReshowableController",__init:function(b){b=b.args._notReshowableMessage;a(this.rootElement).html("<h1>"+b+"</h1>")}},Ha={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(c){var c=c.args||{},d=this.rootElement,e=c.isMain,f=this;this.isMain=!!e;this.followTitle=e&&c.followTitle;this.isMain&&pa&&k(100003);this._containerName=
a(d).attr(V)||a(d).attr(K);this._currentController=null;U(d);this._transition=new T;this._transition.onChangeStart(d);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));this._router=Ga;if(this.isMain){pa=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));Ea=this._router.urlHistoryActualMode;this._router.start()}else b(d).done(function(a){f._currentController=a;f._transition.onChangeEnd(f.rootElement,null,a.rootElement);f._transition=null;
a=f._getTitleFromCurrentScene();null!=a&&f.setTitle(a)})},__dispose:function(){Da(this._currentController)||this._currentController.dispose();this._currentController=null;this.isMain&&(this._router.stop(),pa=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(b){if(u(b))return this.navigate({to:b});
this._navigateParam=b;b=a.extend(!0,{},b);this._transition=new T;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=f.async.deferred();this._isNavigated=!0;var d=b.to;if(this.isMain&&b.navigationType!==ka.SILENT){u(d)||k(100004,[d]);-1!==d.indexOf("#")&&k(100005,[d]);b.method===ba.POST&&(this._detour.serverArgs=b.serverArgs,delete b.serverArgs);if(b.navigationType===ka.ONCE||b.method===ba.POST)this._detour.args=f.u.obj.deserialize(f.u.obj.serialize(b.args)),
delete b.args;d=b.replaceHistory;delete b.replaceHistory;b=H(b);this._router.navigate(b,{replaceHistory:d})}else b=H(b),this._router.evaluate(b,{container:this});return c.promise()},setTitle:function(a){this._title=a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(c,d){if(c){var d=d||{},e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new T,this._transition.onChangeStart(this.rootElement,e));e&&w(e);var f=this,g=null;
if(d.navigationType===ka.ONCE||d.method===ba.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;e=null;d.method===ba.POST?(e=this._detour.serverArgs,delete this._detour.serverArgs):e=d.serverArgs;u(c)?ma.test(c)?n(c,a("<div></div>"),g).done(function(a){f._navigateEnd(a,d)}):L(c,d.method,e).done(function(c){b(a("<div></div>").append(c),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(a){k(100008,[c],a)}):c.__name&&ma.test(c.__name)&&
f._navigateEnd(c,d)}},_navigateEnd:function(b,c){var d=this,e=(this._currentController||{}).rootElement,f=b.rootElement;d._currentController=b;var g=c&&c.title;null==g?this._navigateParam&&ma.test(this._navigateParam.to)&&null!=b.sceneTitle?this.setTitle(b.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&a(e).remove();
d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=false;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var b=this._currentController.rootElement,c=a(b).data("h5-scene-title");if(null!=c)return c;b=a(b).find("title");if(b.length)return b.text()},_onNotReshowable:function(b){O.__name&&ma.test(O.__name)?this._navigateEnd(ha.controllerInternal(a("<div></div>"),O,{_notReshowableMessage:"この画面は再表示できません。"}),b):(b=null,b=u(O)?{to:O}:a.extend(!0,{},O),b.args=b.args||{},b.args._notReshowableMessage=
"この画面は再表示できません。",this._navigate(b.to,b))},_defaultFuncForRouter:function(a){var c=this,d=$(a),f=d.to;if(this.isMain&&this._first){if(d.navigationType===ka.ONCE||d.method===ba.POST){this._onNotReshowable(d);this._first=!1;return}var g=f&&ma.test(f),h=Ea===e&&location.hash.substring(1);if(this._router.compareUrl(a)&&!h&&!g){b(this.rootElement,null,d.args).done(function(a){c._currentController=a;c._transition.onChangeEnd(c.rootElement,null,a.rootElement);c._transition=null;a=c._getTitleFromCurrentScene();
null!=a&&c.setTitle(a)});this._first=!1;return}}f=f||location.pathname+location.search;f=N(f);this._first&&(this._navigated=!0);this._navigate(f,d);this._first=!1}};ha.addControllerInstantiationHook(function(a){a.scene=new G(a)});a(function(){ua=f.settings.scene.clientQueryStringPrefix;ra=ua.replace(/\\/g,"\\\\");Ka=f.settings.scene.clientFWQueryStringPrefix;Ta=Ka.replace(/\\/g,"\\\\");Ua=f.settings.scene.urlHistoryMode;X=parseInt(f.settings.scene.urlMaxLength);O=oa;Fa=f.settings.scene.baseUrl;var b=
[];f.settings.scene.routes&&(b=b.concat(f.settings.scene.routes));b=a.map(b,function(a){var b=a.test;if(F(b))var c=b,b=function(a){var b=$(a);return c(a,b)};return{test:b,func:function(b,c){var c=c||{},d=a.navigationInfo;if(F(d))var e=$(b),d=d(b,e);if(null==d)return(c.container||pa)._defaultFuncForRouter(b),null;u(d)&&(d={to:d});return H(d)}}});b.push({test:/.*/,func:function(a,b){b=b||{};(b.container||pa)._defaultFuncForRouter(a)}});Ga=new E({routes:b,urlHistoryMode:Ua,baseUrl:Fa,urlMaxLength:X});
f.settings.scene.autoInit&&ia()});f.u.obj.expose("h5.scene",{createSceneContainer:fa,init:ia,getMainSceneContainer:function(){return pa},getSceneContainers:Z,getSceneContainerByName:function(a){if(null==a)return null;var b=Z();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:ka,method:ba,urlHistoryMode:W})})()})(jQuery);